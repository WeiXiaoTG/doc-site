<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design Schema :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-gui" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="overview.html">GraphStudio and Admin Portal</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">GraphStudio</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview.html">GraphStudio Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="license.html">License</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="user-access-management.html">User Access Management</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="design-schema.html">Design Schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="map-data-to-graph.html">Map Data To Graph</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="load-data.html">Load Data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="explore-graph/README.html">Explore Graph</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/graph-exploration-panel.html">Graph Exploration Panel</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/search-for-vertices.html">Search for Vertices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/expand-from-vertices.html">Expand from Vertices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/find-paths-between-vertices.html">Find Paths between Vertices</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/run-gsql-queries.html">Run GSQL Queries</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="explore-graph/augment-visualization-result.html">Augment Visualization Result</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Build Graph Patterns</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="build-graph-patterns/visual-query-builder-overview.html">Visual Query Builder Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="build-graph-patterns/visual-pattern-examples.html">Visual Pattern Examples</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="write-queries.html">Write Queries</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migrate-from-relational-database.html">Migrate From Relational Database</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="export-and-import-solution.html">Export And Import Solution</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="keyboard-shortcuts.html">Keyboard Shortcuts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="known-issues.html">Known Issues</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="patent-and-third-party-notice.html">GraphStudio Patent and Third Party Notice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Admin Portal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-portal/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-portal/dashboard.html">Dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../admin-portal/monitoring/README.html">Monitor</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/monitoring/log-viewer.html">Logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/management/license.html">License</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#user-management.adoc">user-management.adoc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/components/nginx.html">Nginx</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/components/restpp.html">RESTPP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/components/gui.html">Application Server (GUI)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/security/ldap.html">LDAP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../admin-portal/security/sso.html">SSO</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../admin-portal/known-issues.html">Known Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">GraphStudio and Admin Portal</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="overview.html">GraphStudio and Admin Portal</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-server/3.2/intro/introduction.html">TigerGraph Server</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-server/3.2/intro/introduction.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="overview.html">GraphStudio and Admin Portal</a></li>
    <li>GraphStudio</li>
    <li><a href="design-schema.html">Design Schema</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/tg-gui/edit/main/modules/graphstudio/pages/design-schema.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Design Schema</h1>
<div class="sect1">
<h2 id="_design_schema"><a class="anchor" href="#_design_schema"></a>Design Schema <a id="TigerGraphGraphStudioUIGuide-DesignSchema"></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Beginning with Version 3.0, GraphStudio can support modifying multiple graphs within one TigerGraph instance. Read more about multigraph at <a href="#../../tigergraph-platform-overview/multigraph-overview.adoc" class="page unresolved">MultiGraph - An Overview</a>.</p>
</div>
<div class="paragraph">
<p>Designing the graph schema is the first and most important step of solving a business problem. The graph schema is the model of the problem, and all of the subsequent steps depend on the graph schema. If you are not on the Design Schema page yet, click "Design Schema" on the left side menu bar.</p>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
Only certain roles have the privilege to modify a graph schema.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Only the superuser and globaldesigner roles can modify the global graph schema, including creating local graphs.</p>
</li>
<li>
<p>Only the superuser, globaldesigner, and designer roles can modify a local graph schema.
{% endhint %}</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When there is no graph schema in the system, this page will show some hints:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Only the superuser and globaldesigner roles can modify the global graph schema, including creating local graphs.</p>
</li>
<li>
<p>Only the superuser, globaldesigner, and designer roles modify a local graph schema.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/design-schema-no-graph-globalview.png" alt="design schema no graph globalview">
</div>
</div>
<div class="paragraph">
<p>Otherwise this page will visualize the schema:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/schema.png" alt="schema">
</div>
</div>
<div class="paragraph">
<p>Each circle represents a vertex type, and each link represents an edge type. You can drag the circles to change their positions. There are two ways to zoom in and out. If you have a touchpad, two-finger moving up zooms in; two-finger moving down zooms out. Similarly, if your mouse has a scroll wheel, spinning forward zooms in, and spinning backward zooms out.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The relationship between a vertex type and a vertex instance of a graph is like the relationship between a table and one record of a table in the relational database world. The relationship between an edge type and an edge instance is similar. In the Design Schema step, the user defines vertex types and edge types to model the data schema. After the schema has been created, the next two steps, Map Data To Graph and Load Data, are for loading data into the graph.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_global_view_vs_graph_view"><a class="anchor" href="#_global_view_vs_graph_view"></a>Global View vs. Graph View</h3>
<div class="paragraph">
<p>For superuser and globaldesigner, they can modify global vertex and edge types under Global View. Under global view, the toolbar area only contains "Publish schema", "Add a vertex type", "Add an edge type",  "Edit", "Delete", "Undo" and "Redo" buttons. There will be a warning message in the working panel saying user is under global view.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/screen-shot-2020-06-10-at-13.01.14.png" alt="screen shot 2020 06 10 at 13.01.14">
</div>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If under global view, other pages except Home and Design Schema will be disabled.</p>
</li>
<li>
<p>Users other than superuser and globaldesigner cannot access global view.
{% endhint %}</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Users can modify a graph schema under graph view. In a graph, there is one more in the toolbar area - "View global vertex and edge types". And for global vertex and edge types used in a graph, a little global icon is attached to them.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/schema-local.png" alt="schema local">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_vertex_type"><a class="anchor" href="#_add_a_vertex_type"></a>Add A Vertex Type <a id="TigerGraphGraphStudioUIGuide-AddAVertexType"></a></h3>
<div class="paragraph">
<p>Click the add vertex type button<span class="image"><img src="../.gitbook/assets/add_vertex_type.png" alt="add vertex type"></span>to add a vertex type. The working space will enter Add Vertex mode and the button color will change to green<span class="image"><img src="../.gitbook/assets/add-vertex-mode-on.png" alt="add vertex mode on"></span>. Click the button again to exit Add Vertex mode. The add vertex type panel in the right:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/add-vertex-panel.png" alt="add vertex panel">
</div>
</div>
<div class="paragraph">
<p>In this window you specify a vertex type name, primary id name. GraphStudio will automatically select a color for your vertex type icon. You can change the vertex type color by clicking the value under the "Color hex" label. A color palette window will pop up allowing you to choose a new color:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/color-picker.png" alt="color picker">
</div>
</div>
<div class="paragraph">
<p>Once you are satisfied with the color, click anywhere outside of the color palette window to set the color.<br>
You can also choose an icon for the vertex type by clicking the Select Icon button<span class="image"><img src="../.gitbook/assets/select_icon_btn.png" alt="select icon btn"></span>. Then a Select Icon window will pop up. Select an icon that fits the vertex type semantic best. You can type in keywords to help filter the icons and find the best match faster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/select_icons.png" alt="select icons">
</div>
</div>
<div class="paragraph">
<p>You can also upload your own icons by clicking the Upload Icon button, choosing a PNG image, giving a name and click Upload:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/upload_icon.png" alt="upload icon">
</div>
</div>
<div class="paragraph">
<p>Then you can use your uploaded icons:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/select_icon_with_user_upload.png" alt="select icon with user upload">
</div>
</div>
<div class="paragraph">
<p><strong>Adding and Deleting Attributes</strong><br>
To add an attribute, click the green plus sign at the right of the Attributes section:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/add-attribute.png" alt="add attribute">
</div>
</div>
<div class="paragraph">
<p>Provide a name and data type for your new attribute. Optionally, you can specify a default value for the attribute. (If you do not specify, every data type has a system default value. For example, the default value for an integer is 0.)</p>
</div>
<div class="paragraph">
<p>For some types of attributes (INT, UINT, STRING, STRING COMPRESS, DATETIME), you can add an index, which will improve query performance when accessing these attributes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/attribute-with-index.png" alt="attribute with index">
</div>
</div>
<div class="paragraph">
<p>Click the red minus sign to the right of the attribute to delete an existing attribute.</p>
</div>
<div class="paragraph">
<p>Once you are satisfied with the vertex type settings, click the Add button<span class="image"><img src="../.gitbook/assets/add-btn.png" alt="add btn"></span>to add the vertex type. A new circle will appear in the working panel. You can drag the circle to any desired position.</p>
</div>
<div class="paragraph">
<p>{% hint style="danger" %}
Note:  PRIMARY KEY and COMPOSITE KEY is not supported in GraphStudio. If you decide to use these features, you will only be able to use command line interface.
{% endhint %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_an_edge_type"><a class="anchor" href="#_add_an_edge_type"></a>Add An Edge Type <a id="TigerGraphGraphStudioUIGuide-AddAnEdgeType"></a></h3>
<div class="paragraph">
<p>Click the add edge type button<span class="image"><img src="../.gitbook/assets/add_edge_type.png" alt="add edge type"></span>to add an edge type. The working space will enter Add Edge mode and the button color will change to green<span class="image"><img src="../.gitbook/assets/add_edge_type_active.png" alt="add edge type active"></span>. Click the button again to exit Add Edge mode.</p>
</div>
<div class="paragraph">
<p>Each edge type has one or many source vertex types and target vertex types. First, click the source vertex type. A hint will appear on the vertex type circle:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/click_edge_type_source_vertex.png" alt="click edge type source vertex">
</div>
</div>
<div class="paragraph">
<p>Then click the target vertex type. The add edge type panel will be in the right:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/add-edge-panel.png" alt="add edge panel">
</div>
</div>
<div class="paragraph">
<p>You must specify an edge type name. The source vertex type and target vertex type are selected based on your clicking action. However, you can change that by choosing another vertex type in the dropdown list.</p>
</div>
<div class="paragraph">
<p>You can also click the green plus sign at the right of the source and target vertex types section to add more source and target vertex types of the edge type.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/edge-multi-pair.png" alt="edge multi pair">
</div>
</div>
<div class="paragraph">
<p>By default, the edge type is undirected. To make the edge type directed, mark the Directed checkbox:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/directed-edge.png" alt="directed edge">
</div>
</div>
<div class="paragraph">
<p>If Directed is checked, another checkbox will appear for you to choose whether the edge type should include reverse edges. Including reverse edges provides more flexibility when designing queries. Unselect the reverse edge checkbox ONLY IF your machine memory is very tight, because if there is no reverse edge, queries will not be able to traverse backwards along this directed edge type, from the target vertex to the source vertex.</p>
</div>
<div class="paragraph">
<p>Editing edge type attributes is the same as editing vertex type attributes.</p>
</div>
<div class="paragraph">
<p>Once you are satisfied with the edge type settings, click the Add button<span class="image"><img src="../.gitbook/assets/add-btn.png" alt="add btn"></span>to add the edge type. A new link between the selected source vertex type circle(s) and target vertex type circle(s) will appear in the working panel.</p>
</div>
<div class="paragraph">
<p>You can add multiple edge types between the same source vertex type and target vertex type pair. Moreover, an edge can use the same vertex type for both its source vertex type and its target vertex type, e.g., a Friendship edge from Person vertex to Person vertex.</p>
</div>
</div>
<div class="sect2">
<h3 id="_edit_vertex_or_edge_type"><a class="anchor" href="#_edit_vertex_or_edge_type"></a>Edit Vertex Or Edge Type <a id="TigerGraphGraphStudioUIGuide-EditVertexOrEdgeType"></a></h3>
<div class="paragraph">
<p>You can edit the vertex types or edge types at any time after you add them. Just click one vertex type circle or one edge link, and then click the edit button<span class="image"><img src="../.gitbook/assets/edit.png" alt="edit"></span>(double clicking on the selected vertex/edge will have the same effect). The working space will enter Edit mode and the button color will change to green<span class="image"><img src="../.gitbook/assets/edit-mode-on.png" alt="edit mode on"></span>. Click the button again to exit Edit mode. The Edit Attributes panel in the right:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/edit-panel.png" alt="edit panel">
</div>
</div>
<div class="paragraph">
<p>Once you are satisfied with the change, click the Update button<span class="image"><img src="../.gitbook/assets/add-btn.png" alt="add btn"></span>.</p>
</div>
<div class="paragraph">
<p>In graph mode, you can only edit the style of a global vertex or edge type:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/view-panel.png" alt="view panel">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_delete_vertex_or_edge_type"><a class="anchor" href="#_delete_vertex_or_edge_type"></a>Delete Vertex Or Edge Type <a id="TigerGraphGraphStudioUIGuide-DeleteVertexOrEdgeType"></a></h3>
<div class="paragraph">
<p>You can delete a vertex type or an edge type by first choosing the vertex type circles or edge type links, then clicking the delete button<span class="image"><img src="../.gitbook/assets/delete_btn.png" alt="delete btn"></span>. In order to delete multiple vertex types and edge types, hold down the "Shift" key while you select multiple items.</p>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
Note that user cannot delete a global vertex or edge type using delete button in a graph.
{% endhint %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_redo_and_undo"><a class="anchor" href="#_redo_and_undo"></a>Redo And Undo <a id="TigerGraphGraphStudioUIGuide-RedoAndUndo"></a></h3>
<div class="paragraph">
<p>You can redo and undo your changes by clicking the two buttons:<span class="image"><img src="../.gitbook/assets/redo_undo_btn.png" alt="redo undo btn"></span>. The whole history since the time you entered Design Schema page is recorded.</p>
</div>
</div>
<div class="sect2">
<h3 id="_view_global_vertex_and_edge_types"><a class="anchor" href="#_view_global_vertex_and_edge_types"></a>View Global Vertex And Edge Types</h3>
<div class="paragraph">
<p>Click the view global vertex and edge types button<span class="image"><img src="../.gitbook/assets/view-global-type-button.png" alt="view global type button"></span>to assign global vertex and edge types to a graph, or drop them from a graph. The working space will enter View Global Vertex and Edge Types mode and the button color will change to green<span class="image"><img src="../.gitbook/assets/view-global-types-mode-on.png" alt="view global types mode on"></span>. Click the button again to exit View Global Vertex and Edge Types mode. The add vertex type panel in the right:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/view-global-types-panel.png" alt="view global types panel">
</div>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
Only superuser or globaldesigner can modify global types in a graph. The view global vertex and edge types button will be disabled for other users.
{% endhint %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_publish_schema"><a class="anchor" href="#_publish_schema"></a>Publish Schema <a id="TigerGraphGraphStudioUIGuide-PublishSchema"></a></h3>
<div class="paragraph">
<p>Once you are satisfied with the graph schema, click the publish schema button<span class="image"><img src="../.gitbook/assets/publish_btn.png" alt="publish btn"></span>to publish the schema to the TigerGraph system. If you are publishing a brand new schema, a progress bar will show:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/installing_schema_enterprise.png" alt="installing schema enterprise">
</div>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
Note that <strong>Publish Schema</strong> applies to both creating a new schema as well as modifying an existing schema.  If you have already loaded data into or created queries for an existing graph, please note that GraphStudio&#8217;s Publish Schema is only able to retain your existing data in some circumstances. Read the following section carefully.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>If you are editing an existing graph schema, GraphStudio will analyze your changes. If the change to a vertex or edge type is to remove some attributes and / or to add some new attributes, or add or remove index to some attributes, GraphStudio will employ a GSQL SCHEMA_CHANGE job in order to retain the graph data you already loaded.</p>
</div>
<div class="paragraph">
<p>All other types of changes, including <strong>renaming</strong> the vertex or edge type, <strong><strong>changing </strong>attribute name or data type</strong>, changing <strong>edge direction</strong>, adding or removing <strong>reverse edge</strong> will result in removing the old vertex or edge type and then adding the new one with your desired configurations. In that case, the loaded data to that vertex or edge type will be erased. Please think twice before you do this type of changes.</p>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
If a vertex type will be removed in order to change the schema, all edge types connected to that vertex type will also be removed.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>When you are editing a graph schema, a warning message in the top-left side of the working panel will show which old vertex and edge types will be removed. Make sure to check the message periodically to make sure it is as you expect:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/affected_ve_types.png" alt="affected ve types">
</div>
</div>
<div class="paragraph">
<p>Finally, when you click publish schema button<span class="image"><img src="../.gitbook/assets/publish_btn.png" alt="publish btn"></span>, a pop up window will summarize your changes to the schema. The vertex and edge types that will be removed are highlighted. Make sure you confirm the changes before continue:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/screen-shot-2019-01-24-at-11.28.29-am.png" alt="screen shot 2019 01 24 at 11.28.29 am">
</div>
</div>
<div class="paragraph">
<p>Click continue button, and GraphStudio will start changing your schema:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/changing_schema.png" alt="changing schema">
</div>
</div>
<div class="paragraph">
<p>If you have already created a data mapping and written queries, GraphStudio will try its best to preserve your work when you publish your modified schema:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>All your queries will be saved as query drafts, so you can install the queries again after you change your schema. If a query has a conflict with the new schema (e.g., referring to a vertex type that is deleted), you need to fix it before installing the query.</p>
</li>
<li>
<p>GraphStudio will migrate your data mapping based on your changes to the schema. Since GraphStudio records your whole operation history, the migration is smart enough to cover most cases. The basic migration rules are the following:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Rename vertex types and edge types</p>
</li>
<li>
<p>Remove mappings to deleted vertex types and edge types.</p>
</li>
<li>
<p>Remove mappings to deleted or modified attributes.</p>
</li>
<li>
<p>New vertex types, edge types and new attributes won&#8217;t be mapped.</p>
</li>
<li>
<p>After the schema is successfully published, GraphStudio will instruct you to go to the Map Data To Graph page to verify and publish the revised data mapping. If any mapping is not correct, you can fix it. You <strong>must publish</strong> the migrated data mapping; otherwise, it will be lost.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you have published some data mapping through GraphStudio, then after schema is changed successfully, a pop up window will guide you to go to the Map Data To Graph page to confirm and publish the migrated data mapping:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../.gitbook/assets/migrate_data_mapping.png" alt="migrate data mapping">
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
