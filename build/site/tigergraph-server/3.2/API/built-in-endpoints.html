<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Built-in Endpoints :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-server" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../intro/introduction.html">TigerGraph Server</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../intro/introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/internal-architecture.html">Internal Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/multigraph-overview.html">Multigraph Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/transaction-and-acid.html">Transaction Processing and ACID Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/comparison-of-editions.html">Comparing TigerGraph Editions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/continuous-availability-overview.html">Continuous Availability Overview</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/docker.html">Get started with Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get started with cloud images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/cloud-images/aws.html">Get Started on AWS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/cloud-images/azure.html">Get Started on Microsoft Azure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/cloud-images/gcp.html">Get Started on Google Cloud</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/linux.html">Install TigerGraph on Linux</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Learn GSQL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#3.2@gsql-ref:tutorials:gsql-101/README.adoc">3.2@gsql-ref:tutorials:gsql-101/README.adoc</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#3.2@gsql-ref:tutorials:pattern-matching/README.adoc">3.2@gsql-ref:tutorials:pattern-matching/README.adoc</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/hw-and-sw-requirements.html">Hardware and Software Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/install.html">Installlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/uninstallation.html">Uninstallation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/license.html">Advanced License Issues</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../gsql-shell/gsql-shell.html">The GSQL Shell</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gsql-shell/using-a-remote-gsql-client.html">Using a Remote GSQL Client</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../user-access/README.html">User Access Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/enabling-user-authentication.html">Enabling User Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/managing-credentials.html">Managing Credentials</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/roles-and-privileges.html">Roles and Privileges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/role-management.html">Role Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/user-management.html">User Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/vlac.html">Vertex-Level Access Control (Beta)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/sso.html">Single Sign-On</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../user-access/ldap.html">Lightweight Directory Access Protocol (LDAP)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">High Availability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ha/ha-cluster.html">HA Cluster Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ha/ha-for-gsql-server.html">High Availability Support for GSQL Server</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ha/ha-for-application-server.html">High Availability Support for Application Server</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../ha/cluster-commands.html">Cluster Commands</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cluster-resizing/README.html">Cluster Resizing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cluster-resizing/expand-a-cluster.html">Cluster Expansion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cluster-resizing/shrink-a-cluster.html">Cluster Shrinking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cluster-resizing/repartition-a-cluster.html">Cluster Repartition</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../crr/cross-region-replication.html">Cross-Region Replication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kubernetes/README.html">Kubernetes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes/quickstart-with-docker-desktop.html">Quickstart with Docker Desktop</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes/quickstart-with-eks.html">Quickstart with EKS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes/quickstart-with-aks.html">Quickstart with AKS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes/quickstart-with-gke.html">Quickstart with GKE</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../data-definition/README.html">Database Definition</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../data-loading/README.html">Data Loading</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-loading/s3-loader-user-guide.html">AWS S3 Loader User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-loading/kafka-loader-user-guide.html">Kafka Loader User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-loading/spark-connection-via-jdbc-driver.html">Spark Connection Via JDBC Driver</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../data-querying/README.html">Querying</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../gadmin/management-with-gadmin.html">Managing with gadmin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/encrypting-connections.html">Encrypting Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/encrypting-data-at-rest.html">Encrypting Data At Rest</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/file-output-policy.html">File Output Policy</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../import-export/database-import-export.html">Database Import/Export</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../backup-and-restore/backup-and-restore.html">Backup and Restore</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST API Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="intro.html">Introduction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="built-in-endpoints.html">Built-in Endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="json-catalog.html">Built-in Endpoints JSON Catalog</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://tigergraph.freshdesk.com/support/solutions">Knowledge base and FAQs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting/system-administration-faqs.html">System Administration FAQs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting/log-files.html">Log files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting/troubleshooting-guide.html">Troubleshooting Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Release Notes and Change Logs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release-notes/release-notes.html">Release Notes - TigerGraph Server 3.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release-notes/change-log.html">Change Log</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../release-notes/v3.0-removal-of-previously-deprecated-features.html">V3.0 Removal of Previously Deprecated Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../legal/patents-and-third-party-software.html">Patents and Third Party Software</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/configuration-parameters.html">Configuration Parameters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/error-codes.html">Error codes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/list-of-privileges.html">List of Privileges</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Server</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tigergraph-gui/3.2/graphstudio/overview.html">GraphStudio and Admin Portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../intro/introduction.html">TigerGraph Server</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../intro/introduction.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../intro/introduction.html">TigerGraph Server</a></li>
    <li>REST API Reference</li>
    <li><a href="built-in-endpoints.html">Built-in Endpoints</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/tg-server/edit/main/modules/API/pages/built-in-endpoints.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Built-in Endpoints</h1>
<div class="sect1">
<h2 id="_system_utilities"><a class="anchor" href="#_system_utilities"></a>System Utilities</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_echo"><a class="anchor" href="#_echo"></a>Echo</h3>
<div class="paragraph">
<p><code>GET /echo</code> and <code>POST /echo</code></p>
</div>
<div class="paragraph">
<p>These endpoints are simple diagnostic utilities, which respond with the following message if the RESTPP server is up and running.</p>
</div>
<div class="sect3">
<h4 id="_sample_request"><a class="anchor" href="#_sample_request"></a>Sample request:</h4>
<div class="paragraph">
<p>{% code title="GET echo/ Request and Response" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/echo"
{
    "error": false,
    "message": "Hello GSQL"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p><code>POST /echo</code> has the same response as <code>GET /echo</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameters"><a class="anchor" href="#_parameters"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sleep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that indicates the number of seconds for which the response will be delayed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_health_check_public"><a class="anchor" href="#_health_check_public"></a>Health check (public)</h3>
<div class="paragraph">
<p>This endpoint performs a simple server health check. It listens on port 14240 and does not require authentication. If you ping it and the server is running, it will respond with the message "pong".</p>
</div>
<div class="sect3">
<h4 id="_endpoint"><a class="anchor" href="#_endpoint"></a>Endpoint:</h4>
<div class="paragraph">
<p><code>GET /api/ping</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_2"><a class="anchor" href="#_sample_request_2"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">$ curl 'http://localhost:14240/api/ping'
​
{
  "error": "false",
  "message": "pong",
  "results": {}
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_2"><a class="anchor" href="#_parameters_2"></a>Parameters:</h4>
<div class="paragraph">
<p>No parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_list_all_endpoints"><a class="anchor" href="#_list_all_endpoints"></a>List all endpoints</h3>
<div class="paragraph">
<p><code>GET /endpoints/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint returns a list of the installed endpoints and their parameters. There are three types of endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Built-in endpoints</em> which are preinstalled in the TigerGraph system</p>
</li>
<li>
<p><em>Dynamic endpoints</em> which are generated when compiling GSQL queries</p>
</li>
<li>
<p><em>Static endpoints</em> which are user-installed endpoints</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To include one or more of the endpoint types in the output, include the endpoint type in the parameter query string and set its value to <code>true</code>. If no type parameters are provided, all endpoints are returned.</p>
</div>
<div class="paragraph">
<p>{% code title="Example: Report on all built-in endpoints" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/endpoints?builtin=true" | jq .</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="sect3">
<h4 id="_response"><a class="anchor" href="#_response"></a>Response</h4>
<div class="paragraph">
<p>There are over a dozen built-in endpoints, and some have several parameters, so the formatted JSON output of all built-in endpoints is over 300 lines long. It is listed in full in Appendix A. Below is a small excerpt of the output:</p>
</div>
<div class="paragraph">
<p>{% code title="Subset of GET /endpoints output" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">    "GET /endpoints": {
        "parameters": {
            "builtin": {
                "default": "false",
                "max_count": 1,
                "min_count": 0,
                "type": "BOOL"
            },
            "dynamic": {
                "default": "false",
                "max_count": 1,
                "min_count": 0,
                "type": "BOOL"
            },
            "static": {
                "default": "false",
                "max_count": 1,
                "min_count": 0,
                "type": "BOOL"
            }
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_3"><a class="anchor" href="#_parameters_3"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>builtin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. Returns built-in endpoints if true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dynamic</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. Returns dynamic endpoints if true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. Returns user-installed endpoints if true.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_show_component_versions"><a class="anchor" href="#_show_component_versions"></a>Show component versions</h3>
<div class="paragraph">
<p><code>GET /version</code></p>
</div>
<div class="paragraph">
<p>This endpoint returns the GIT versions of all components of the system.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_3"><a class="anchor" href="#_sample_request_3"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/version"
{"error":"false", "message":"TigerGraph RESTPP:
 --- Version ---
product              release_2.6.0_05-09-2020 ab1e3d0da6237c27468d6cabb90900119d63759d  2020-04-15 15:46:29 -0700
olgp                 release_2.6.0_05-09-2020 046c745088106b69920b9bdb3bd15969de409e92  2020-05-01 19:10:27 -0700
topology             release_2.6.0_05-09-2020 c028af100117f2051b619436c3aa4febc810bf36  2020-04-22 08:44:07 -0700
gpe                  release_2.6.0_05-09-2020 34b9e86ef7b5fdaa106637e7db1d8a9e080a0aa2  2020-04-19 09:42:59 -0700
gse                  release_2.6.0_05-09-2020 ed2c2351357aa9077fa4dee7ea7a01f8ad2f7585  2020-05-11 01:18:54 -0700
third_party          release_2.6.0_05-09-2020 4bce6990bae5be2b91e9201693ceb66341d3f204  2020-04-19 09:42:56 -0700
utility              release_2.6.0_05-09-2020 2ce197d3edb3557bdd66ed1a4194309908d6197e  2020-04-20 21:19:34 -0700
realtime             release_2.6.0_05-09-2020 52a82b454437c73b47d846acd5803ab0d9f54a45  2020-04-22 08:44:11 -0700
er                   release_2.6.0_05-09-2020 a3e6cb7606fb74984c75cae9bbd4d2112fdbf73a  2020-05-01 19:10:33 -0700
gle                  release_2.6.0_05-09-2020 d8bdbd1cf346e181aa9a317c704dd7b3b11b4658  2020-05-06 00:51:04 -0700
bigtest              release_2.6.0_05-09-2020 2f64c47b7a5ac1834ead9a22eef8d42241117853  2019-12-12 01:31:35 -0800
document             release_2.6.0_05-09-2020 6327094bd76b2dbc8f4625108d547827344b5091  2019-12-13 16:30:13 -0800
glive                release_2.6.0_05-09-2020 93f61ea06fe42759c808fc58ff6245c9954d5447  2020-02-05 22:40:24 -0800
gap                  release_2.6.0_05-09-2020 e798efb595545bf91c449034566857c41f52449a  2020-04-29 22:47:26 -0700
gst                  release_2.6.0_05-09-2020 1b695c02f277efad0ddfb2deab710ae0158409da  2020-04-29 22:47:32 -0700
gus                  release_2.6.0_05-09-2020 eee784502b5387844e462305bae419954784da6f  2020-04-29 22:47:20 -0700
blue_features        release_2.6.0_05-09-2020 5d7a4e8d806519f529274b331496d3bc78f01990  2020-04-15 15:46:38 -0700
blue_commons         release_2.6.0_05-09-2020 432763afc49bf986aed4731e50254243d3665bc3  2019-07-30 03:34:46 -0700
"}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_4"><a class="anchor" href="#_parameters_4"></a>Parameters</h4>
<div class="paragraph">
<p>This endpoint does not take any parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_monitor_system_metrics"><a class="anchor" href="#_monitor_system_metrics"></a>Monitor system metrics</h3>
<div class="paragraph">
<p><code>POST /ts3/api/datapoints</code></p>
</div>
<div class="paragraph">
<p>TigerGraph System State Service (TS3) is TigerGraph&#8217;s managed monitoring service that collects system metrics and events. Many TigerGraph components will report metrics such as CPU usage, memory usage, disk usage, and network traffic to TS3 at regular intervals. You can use this endpoint to read from TS3,  filtering for the data points you need by time (<code>when</code>, <code>from</code>, and <code>to</code>), component(<code>who</code>), metric(<code>what</code>) and location(<code>where</code>). Visualization of such metrics are available in Admin Portal - Dashboard - <a href="../../../tigergraph-gui/3.2/admin-portal/dashboard.html" class="page">Cluster Monitoring</a>.</p>
</div>
<div class="paragraph">
<p>On a TigerGraph cluster, this endpoint is only present on the <code>m1</code> node.</p>
</div>
<div class="sect3">
<h4 id="_parameters_5"><a class="anchor" href="#_parameters_5"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12%;">
<col style="width: 10%;">
<col style="width: 78%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Epoch timestamp that indicates the start of the time
filter. Only data points reported after the timestamp will be included
in the return results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>to</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Epoch timestamp that indicates the end of the time filter.
Only data points reported before the timestamp will be included in the
return results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>latest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of latest data points to return. If provided,
the endpoint will return the latest data points that satisfy the
<code>what</code>, <code>who</code> and <code>where</code> filters and ignore other time-related
filters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>what</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the metric to filter for. Possible values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cpu</code>: Percentage of CPU usage by component</p>
</li>
<li>
<p><code>mem</code>: Memory usage in megabytes by component</p>
</li>
<li>
<p><code>diskspace</code>: Disk usage in megabytes by
directory</p>
</li>
<li>
<p><code>network</code>: Network traffic in bytes since the service
started</p>
</li>
<li>
<p><code>qps</code>: Number of requests per second by
endpoint</p>
</li>
<li>
<p><code>servicestate</code>: Whether or not the service is online. A value of <code>0</code> indicates that the service is offline while a value of <code>1</code> means the service is online`connection`: Number of open TCP connections.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>who</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the component that reported the datapoint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>where</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the node that the datapoint is reported for</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sample_requests"><a class="anchor" href="#_sample_requests"></a>Sample requests</h4>
<div class="paragraph">
<p>In the sample request below, the filters in the query string include a timeframe starting at <code>1618957536</code> and ending at <code>1619023346</code>, and specifying that the response should only include CPU information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -X GET
"https://crunch.i.tgcloud.io:14240/ts3/api/datapoints?from=1618957536&amp;to=1619023346&amp;what=cpu"

# Three data points returned
[
  {
    "detail": 0,  # GPE is using 0 percent CPU
    "when": 1619023346,
    "where": "m1",
    "who": "GPE_1#1",
    "what": "cpu"
  },
  {
    "detail": 0,
    "when": 1619023346,
    "where": "m1",
    "who": "GSE_1#1",
    "what": "cpu"
  },
  {
    "detail": 0,
    "when": 1619023346,
    "where": "m1",
    "who": "RESTPP#1",
    "what": "cpu"
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the below example, the request asks for the 10 latest data points regarding memory usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -X GET
"https://crunch.i.tgcloud.io:14240/ts3/api/datapoints?what=mem&amp;latest=10"

[
  {
    "detail": 159,
    "when": 1620076473,
    "where": "m1",
    "who": "RESTPP#1",
    "what": "mem"
  },
  {
    "detail": 211,
    "when": 1620076533,
    "where": "m1",
    "who": "GPE_1#1",
    "what": "mem"
  },
  {
    "detail": 436,
    "when": 1620076533,
    "where": "m1",
    "who": "GSE_1#1",
    "what": "mem"
  },
  {
    "detail": 159,
    "when": 1620076533,
    "where": "m1",
    "who": "RESTPP#1",
    "what": "mem"
  },
  {
    "detail": 211,
    "when": 1620076593,
    "where": "m1",
    "who": "GPE_1#1",
    "what": "mem"
  },
  {
    "detail": 436,
    "when": 1620076593,
    "where": "m1",
    "who": "GSE_1#1",
    "what": "mem"
  },
  {
    "detail": 159,
    "when": 1620076593,
    "where": "m1",
    "who": "RESTPP#1",
    "what": "mem"
  },
  {
    "detail": 210,
    "when": 1620076653,
    "where": "m1",
    "who": "GPE_1#1",
    "what": "mem"
  },
  {
    "detail": 436,
    "when": 1620076653,
    "where": "m1",
    "who": "GSE_1#1",
    "what": "mem"
  },
  {
    "detail": 159,
    "when": 1620076653,
    "where": "m1",
    "who": "RESTPP#1",
    "what": "mem"
  }
]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_show_query_performance"><a class="anchor" href="#_show_query_performance"></a>Show query performance</h3>
<div class="paragraph">
<p><code>GET /statistics/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint returns real-time query performance statistics over the given time period, as specified by the <code>seconds</code> <em>**</em>parameter. The <code>seconds</code> parameter must be a positive integer less than or equal to 60.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_4"><a class="anchor" href="#_sample_request_4"></a>Sample request:</h4>
<div class="paragraph">
<p>The return object is a hash of the endpoints and their performance data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># The example shows two endpoints (/graph/vertex and
# /statistics) called during the past 60 seconds.
curl -X GET "http://localhost:9000/statistics/poc_graph?seconds=60" | jq '.'

{
  "GET /graph/vertices/{vertex_type}/{vertex_id}": {
    "CompletedRequests": 8,
    "QPS": 0.08,
    "TimeoutRequests": 0,
    "AverageLatency": 130,
    "MaxLatency": 133,
    "MinLatency": 128,
    "LatencyPercentile": [
      200,
      200,
      200,
      200,
      200,
      200,
      200,
      200,
      200,
      200
    ]
  },
  "GET /statistics": {
    "CompletedRequests": 4226,
    "QPS": 42.26,
    "TimeoutRequests": 0,
    "AverageLatency": 2,
    "MaxLatency": 125,
    "MinLatency": 0,
    "LatencyPercentile": [
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      10,
      200
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each endpoint has the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CompletedRequests</code> - the number of completed requests.</p>
</li>
<li>
<p><code>QPS</code> - query per second.</p>
</li>
<li>
<p><code>TimeoutRequests</code> - the number of requests not returning before the system-configured timeout limit. Timeout requests are not included in the calculation of QPS.</p>
</li>
<li>
<p><code>AverageLatency</code> - the average latency of completed requests.</p>
</li>
<li>
<p><code>MaxLatency</code> - the maximum latency of completed requests.</p>
</li>
<li>
<p><code>MinLatency</code> - the minimum latency of completed requests.</p>
</li>
<li>
<p><code>LatencyPercentile</code> - The latency distribution. The number of elements in this array depends on the <code>segments</code> <strong><strong>*parameter of this endpoint whose default value is 10, meaning the percentile range 0-100% will be divided into ten equal segments: 0%-10%, 11%-20%, etc.<code>Segments</code> </strong></strong>*must be [1, 100].</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is no query sent in the past given seconds, an empty json will be returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_6"><a class="anchor" href="#_parameters_6"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>seconds</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positive integer less than 60 that indicates how many seconds back from the current time the statistics report will cover.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>segments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that indicates the number of segments that <code>LatencyPercentile</code> array in the response will be split into. The value for this endpoint must be between 1 and 100 and has a default value of 10.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_rebuild_graph_engine"><a class="anchor" href="#_rebuild_graph_engine"></a>Rebuild graph engine</h3>
<div class="paragraph">
<p><code>GET /rebuildnow/{graph_name}</code> or <code>POST /rebuildnow/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>In TigerGraph, when new data is being loaded into the graph (such as new vertices or edges), data is first stored in memory before it is saved to disk permanently. TigerGraph runs a rebuild of the Graph Processing Engine (GPE) to commit the data in memory to disk every 30 seconds, but you can also call this endpoint to trigger a rebuild immediately.</p>
</div>
<div class="sect3">
<h4 id="_parameters_7"><a class="anchor" href="#_parameters_7"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>threadnum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of threads used to execute the rebuild. If
not specified, the number specified in line 185 of the <code>.tg.cfg</code> file
(<code>"RebuildThreadNumber"</code>) in the home directory of the server on which
TigerGraph is running will be used; it is set to 3 by default. The
maximum value for this parameter is the number of vCPUs per node in your
distributed system. If you are running a single-node server, the maximum
is the number of vCPUs on that node. You can run <code>lscpu</code> in the
command line of your Linux server and look in the <code>CPU(s)</code> column to
view the number of vCPUs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertextype</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex type to perform the rebuild for. If not provided, the rebuild will be run for all the vertex types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>segid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Segment ID of the segments to rebuild. If not provided, all segments will be rebuilt. In general, it is recommended not to provide this parameter and rebuild all segments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to save the summary of the rebuild to. If not provided, the default path is <code>/tmp/rebuildnow</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether to perform rebuilds for segments for which there are no records of new data. Normally, a rebuild would skip such segments, but if <code>force</code> is set true, the
segments will not be skipped.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example"><a class="anchor" href="#_example"></a>Example</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -X GET 'http://localhost:9000/rebuildnow/social'

# JSON response
{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "RebuildNow finished, please check details in the folder: /tmp/rebuildnow",
  "results": [],
  "code": "REST-0000"
}

# Example summary file
$ cat finished.summary.txt

[SELECTED]	Segment id: 106, vertextype: 0, vertexsubtypeid: 0, vertexcount: 187732, edgecount: 563196, deletevertexcount: 0, postqueue_pos: 16344, transaction id: 16344, rebuild ts: 1573106412990
[SKIPPED]	Segment id: 6, vertextype: 0, vertexsubtypeid: 0, vertexcount: 85732, edgecount: 3106, deletevertexcount: 0, postqueue_pos: 16344, transaction id: 16344, rebuild ts: 1573106412900</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_deleted_vertices"><a class="anchor" href="#_check_deleted_vertices"></a>Check deleted vertices</h3>
<div class="paragraph">
<p><span class="line-through"><code>GET /deleted_vertex_check</code></span></p>
</div>
<div class="paragraph">
<p>In certain rare cases, TigerGraph&#8217;s Graph Processing Engine (GPE) and Graph Storage Engine (GSE) might be out of sync on vertex deletion information. When this happens, some vertices might exist on one of the components, but not the other. Even though these errors are exceedingly rare, TigerGraph provides an endpoint that allows you to check the deleted vertices on GSE and GPE and see if they out of sync.</p>
</div>
<div class="paragraph">
<p>The check passes if there are no discrepancies between the GSE and GPE in terms of deleted vertices. If there is a discrepancy, the check fails and the return result will contain the IDs of the deleted vertices that are not synced properly. If you are running TigerGraph on a distributed cluster, the check will be performed on each node of the cluster, and the endpoint will return a list containing the results of the check for every node.</p>
</div>
<div class="sect3">
<h4 id="_parameters_8"><a class="anchor" href="#_parameters_8"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>threadnum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that indicates the number of threads used to
execute the deleted vertex check jobs. This parameter is optional and
the default value is 6 if none is provided</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>segid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDs of segments to perform the deleted vertex check for.
If none is provided, the check will be performed on all segments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertextype</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vertex types to perform the deleted vertex check for.
If none is provided, the check will be performed on all vertex types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verbose</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that indicates the level of detail in the return
results. Here is a list of accepted values and their corresponding level
of detail:`0` (default) : Only return whether the check passed and the
list of unsynced vertex IDs`1`: In addition to the previous level, also
return vertex count information <code>2</code>: In addition to the previous level,
return vertex count information for every segment`4`: In addition to the
previous level, also return the IDs of deleted vertices for every
segment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>log</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that indicates the log level of the deleted vertex
check. This log is not returned in the endpoint’s HTTP response, but is
printed to the logs of the GPE component at
<code>/tigergraph/log/gpe/log.INFO</code>:`0` (default): Report brief log for the
check as a whole`1`: Report logs for each segment`2`: Report additional
logs on the obtained deleted ID list</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_example_2"><a class="anchor" href="#_example_2"></a>Example:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Passing check performed on a single-node database
$ curl -X GET "http://localhost:9000/deleted_vertex_check?threadnum=10&amp;verbose=0" |jq .

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "check passed",
  "results": [
    {
      "GPE": "GPE_1_1",
      "PassCheck": true,
      "UnSyncList": []
    }
  ],
  "code": "REST-0000"
}

# Failed check performed on a distributed cluster

$ curl -X GET 'http://localhost:9000/deleted_vertex_check?threadnum=10&amp;verbose=0&amp;vertextype=region' |jq .
{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "check failed",
  "results": [
    {
      "GPE": "GPE_2_1",
      "PassCheck": false,
      "UnSyncList": [
        {
          "Segid": 193,
          "IsRemote": false,
          "VertexType": "region",
          "GPEDelHash": 7013042118817697000,
          "IDSDelHash": 202375168
        }
      ]
    },
    {
      "GPE": "GPE_3_1",
      "PassCheck": false,
      "UnSyncList": [
        {
          "Segid": 193,
          "IsRemote": true,
          "VertexType": "region",
          "GPEDelHash": 7013042118817697000,
          "IDSDelHash": 202375168
        }
      ]
    },
    {
      "GPE": "GPE_1_1",
      "PassCheck": false,
      "UnSyncList": [
        {
          "Segid": 193,
          "IsRemote": true,
          "VertexType": "region",
          "GPEDelHash": 7013042118817697000,
          "IDSDelHash": 202375168
        }
      ]
    }
  ],
  "code": "REST-0000"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication"><a class="anchor" href="#_authentication"></a>Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The endpoints in this subsection allow users to create, refresh and delete authentication tokens for requests made to the REST&#43;&#43; server. <strong>These endpoints only exist when</strong> <a href="../user-access/enabling-user-authentication.html" class="page"><strong>user authentication is enabled</strong></a> <strong>on RESTPP endpoints.</strong></p>
</div>
<div class="sect2">
<h3 id="_request_a_token_get"><a class="anchor" href="#_request_a_token_get"></a>Request a token (<code>GET</code>)</h3>
<div class="paragraph">
<p><code>GET /requesttoken</code></p>
</div>
<div class="paragraph">
<p>If authentication is enabled on RESTPP endpoints, a token needs to be included in the request header for all requests sent to the RESTPP server. A user can generate a token using either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A secret, which is a random string generated in GSQL (see <a href="../user-access/managing-credentials.html" class="page">Managing User Privileges and Authentication</a>)</p>
</li>
<li>
<p>Their username and password in their request header as well as specifying the graph</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_sample_request_5"><a class="anchor" href="#_sample_request_5"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/requesttoken?secret=jiokmfqqfu2f95qs6ug85o89rpkneib3&amp;lifetime=1000000"
{
  "code": "REST-0000",
  "expiration": 1616042814,
  "error": false,
  "message": "Generate new token successfully.",
  "token": "tohvf6khjqju8jf0r0l1cohhlm8gi5fq"
}

curl --user example_username:example_password -X GET "localhost:9000/requesttoken?graph=example_graph"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_9"><a class="anchor" href="#_parameters_9"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes if <code>graph</code> is not supplied</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User&#8217;s secret to generate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lifetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period of time for which the token is valid measured in seconds. The default value is about 2.6 million (about a month).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes if <code>secret</code> is not supplied</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the graph that the token will be valid for.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Users can use either <code>secret</code> or their username and password to generate a token. If the user does not supply a secret and chooses to use their username and password instead, then the parameter <code>graph</code> becomes required.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_request_a_token_post"><a class="anchor" href="#_request_a_token_post"></a>Request a token (<code>POST</code>)</h3>
<div class="paragraph">
<p><code>POST /requesttoken</code></p>
</div>
<div class="paragraph">
<p>You may also use a <code>POST</code> request to generate your token. This allows you to avoid exposing your secret in the query string.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_6"><a class="anchor" href="#_sample_request_6"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -d &lt;path_to_secret&gt; -X POST \
"http://localhost:9000/requesttoken?lifetime=1000000"
{
  "code": "REST-0000",
  "expiration": 0,
  "error": false,
  "message": "Refresh token successfully.",
  "token": "tohvf6khjqju8jf0r0l1cohhlm8gi5fq"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>path_to_secret</code> with the path to the file containing your secret. The file should only include a single line, which is your secret.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_10"><a class="anchor" href="#_parameters_10"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lifetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period of time for which the token is valid measured in seconds. The default value is about 2.6 million (about a month).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_refresh_a_token"><a class="anchor" href="#_refresh_a_token"></a>Refresh a token</h3>
<div class="paragraph">
<p><code>PUT /requesttoken</code></p>
</div>
<div class="paragraph">
<p>This endpoint takes a token and its associated secret and refreshes the lifetime of the token. The token itself remains unchanged.</p>
</div>
<div class="paragraph">
<p><strong>Parameters:</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token to refresh.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User&#8217;s secret used to generate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lifetime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period of time for which the token is valid measured in seconds.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_sample_request_7"><a class="anchor" href="#_sample_request_7"></a>Sample request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X PUT "http://localhost:9000/requesttoken?lifetime=15&amp;secret=ksdoilrvpl0r0tef3d4abbpgu0t2u5la&amp;token=0mq98l9pderkaivndf820gudg923p3l0"|jq .
{
  "code": "REST-0000",
  "expiration": 15,
  "error": false,
  "message": "Refresh token successfully.",
  "token": "0mq98l9pderkaivndf820gudg923p3l0"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
<strong>Known bug</strong>: The output shows the lifetime instead of the expiration time.
{% endhint %}</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_delete_a_token"><a class="anchor" href="#_delete_a_token"></a>Delete a token</h3>
<div class="paragraph">
<p><code>DELETE /requesttoken</code></p>
</div>
<div class="paragraph">
<p>This endpoint takes a token and its associated secret, and deletes the token.</p>
</div>
<div class="sect3">
<h4 id="_parameters_11"><a class="anchor" href="#_parameters_11"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token to delete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User&#8217;s secret used to generate the token.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_loading_jobs"><a class="anchor" href="#_loading_jobs"></a>Loading jobs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_run_a_loading_job"><a class="anchor" href="#_run_a_loading_job"></a>Run a Loading Job</h3>
<div class="paragraph">
<p><code>POST /ddl/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint is for loading data into a graph. It submits data as an HTTP request payload, to be loaded into the graph by the DDL Loader. The data payload can be formatted as generic CSV or JSON. For more details, please see <a href="#3.2@gsql-ref:ddl-and-loading:README.adoc" class="page unresolved">GSQL Language Reference Part 1 - Defining Graphs and Loading Data</a>.</p>
</div>
<div class="paragraph">
<p>If the loading job references multiple files, multiple HTTP requests are needed to complete the loading job since you can only provide data for one filename varibale at a time. The loading job will skip the <code>LOAD</code> statements referencing filename variables that the request didn&#8217;t provide data for.  To provide data for a filename variable, put the data in the request body and use the <code>filename</code> parameter (explained in the parameter table below) to match the variable name defined in the loading job.</p>
</div>
<div class="sect3">
<h4 id="_request_body"><a class="anchor" href="#_request_body"></a>Request body:</h4>
<div class="paragraph">
<p>The request body is the data to be loaded (either in CSV or JSON format).</p>
</div>
<div class="paragraph">
<p>Curl allows you to read the data from an input file by using the @ symbol:</p>
</div>
<div class="paragraph">
<p><code>curl -X POST --data-binary @./company.csv "http://…"</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_8"><a class="anchor" href="#_sample_request_8"></a>Sample request:</h4>
<div class="paragraph">
<p>In this example, the loading job is dependent on three filename variables (<code>f1</code> and <code>f3</code>) and one filepath string. Therefore, three HTTP requests are needed to complete the loading job.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Loading job
CREATE LOADING JOB load_data for GRAPH poc_graph {

    DEFINE FILENAME f1;
    DEFINE FILENAME f3;

    LOAD f1 to VERTEX person VALUES ($0, $0);
    LOAD "/home/data/company.csv" to VERTEX company VALUES ($0, $0);

    LOAD f3 to EDGE work_at VALUES ($0, $1, $3, $4, $5);
}

# Provide data for for the second LOAD statement
curl -X POST --data-binary @./another_company.csv \
"http://localhost:9000/ddl/poc_graph?tag=load_data&amp;filename=__GSQL_FILENAME_0__" | jq

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "sourceFileName": "Online_POST",
      "statistics": {
        "validLine": 7927,
        "rejectLine": 0,
        "failedConditionLine": 0,
        "notEnoughToken": 0,
        "invalidJson": 0,
        "oversizeToken": 0,
        "vertex": [
          {
            "typeName": "company",
            "validObject": 7,
            "noIdFound": 0,
            "invalidAttribute": 0,
            "invalidPrimaryId": 0,
            "invalidSecondaryId": 0,
            "incorrectFixedBinaryLength": 0
          }
        ],
        "edge": [],
        "deleteVertex": [],
        "deleteEdge": []
      }
    }
  ],
  "code": "REST-0000"
}

# Provide data for filename f1 for the first LOAD statement
curl -X POST --data-binary @./person.csv \
"http://localhost:9000/ddl/poc_graph?tag=load_data&amp;filename=f1"

# Provide data for filename f3 for the third LOAD statement
curl -X POST --data-binary @./work_at.csv \
"http://localhost:9000/ddl/poc_graph?tag=load_data&amp;filename=f3"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_12"><a class="anchor" href="#_parameters_12"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loading job name defined in your DDL loading job</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filename</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File variable name or file path for the file containing the data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sep</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separator of CSV data. If your data is JSON, you do not need to specify this parameter. The default separator is a comma<code>","</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eol</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-of-line character. Only one or two characters are allowed, except for the special case "\r\n". The default value is <code>"\n"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"all"</code>: request will return after all GPE instances have acknowledged the <code>POST</code> request. <code>"none"</code>: request will return immediately after RESTPP processed the <code>POST</code> request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout in seconds. If set to 0, use system-wide endpoint timeout setting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>concise</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether to return concise results of the data loading request. Concise results will only include the number of vertices and edges added or deleted, and will omit information such as the number of valid and invalid lines in the default response.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If there are special characters in your parameter values, the special characters should use <a href="https://www.w3schools.com/tags/ref_urlencode.asp">URL encoding</a>. To avoid confusion about whether you should you one or two backslashes, we do not support backslash escapes for the <code>eol</code> or <code>sep</code> parameter.</p>
</div>
<div class="paragraph">
<p>The maximum size of data you can upload via this endpoint is controlled by the <a href="intro.adoc#_request_body_size"><code>Nginx.ClientMaxBodySize</code></a> configuration parameter (default is 200 MB).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graphs"><a class="anchor" href="#_graphs"></a>Graphs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_run_built_in_functions_on_graph"><a class="anchor" href="#_run_built_in_functions_on_graph"></a>Run built-in functions on graph</h3>
<div class="paragraph">
<p><code>POST /builtins/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint runs a set of built-in functions and returns relevant statistics about a graph.</p>
</div>
<div class="sect3">
<h4 id="_request_body_2"><a class="anchor" href="#_request_body_2"></a>Request body:</h4>
<div class="paragraph">
<p>This endpoint expects a data payload in the request body that specifies which function to run on the graph. Depending on the function being run, different fields may also be expected in the request body.</p>
</div>
<div class="paragraph">
<p>Here is a list of functions supported by this endpoint and their corresponding data payload format.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>stat_vertex_attr</code></p>
<div class="ulist">
<ul>
<li>
<p>Returns the minimum, maximum, and average values of the given vertex type&#8217;s <code>int</code>, <code>uint</code>, <code>float</code> and <code>double</code> attributes, and the count of <code>true</code> and <code>false</code> of a boolean attribute.</p>
</li>
<li>
<p>Data payload fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>"function": "stat_vertex_attr"</code>: This specifies that the function to run is<code>stat_vertex_attr</code>.</p>
</li>
<li>
<p><code>"type"</code>: The vertex type whose attribute values to report on. Required field. It also accepts the value <code>*</code> (wild card), in which case, all vertex types are included.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>stat_edge_attr</code></p>
<div class="ulist">
<ul>
<li>
<p>Returns the minimum, maximum, and average values of the given edge type&#8217;s <code>int</code>, <code>uint</code>, <code>float</code> and <code>double</code> attributes, and the count of <code>true</code> and <code>false</code> of a boolean attribute.</p>
</li>
<li>
<p>Data payload fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>"function": stat_edge_attr</code></p>
</li>
<li>
<p><code>"type"</code>: The edge type whose attribute values to report on. Required field. It also accepts the value <code>*</code> , in which case all edge types are included.</p>
</li>
<li>
<p><code>"from_type"</code>: Optional. The source vertex type of the edges to report on.</p>
</li>
<li>
<p><code>"to_type"</code>: Optional. The target vertex type of the edges to report on.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>stat_vertex_number</code></p>
<div class="ulist">
<ul>
<li>
<p>Returns the number of vertices of the given vertex type.</p>
</li>
<li>
<p>Data payload fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>"function"</code>:  <code>"stat_vertex_number"</code></p>
</li>
<li>
<p><code>"type"</code>: Required field. The vertex type of the vertices to count. It also accepts the value <code>*</code> (wild card), in which case, all vertex types are included.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>stat_edge_number</code></p>
<div class="ulist">
<ul>
<li>
<p>Returns the number of edges of the given edge type</p>
</li>
<li>
<p>Data payload fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>"function": "stat_edge_number"</code></p>
</li>
<li>
<p><code>"type"</code>: Required field. The edge type of the edges to count. It also accepts the value <code>*</code> , in which case all edge types are included.</p>
</li>
<li>
<p><code>"from_type"</code>: Optional. The source vertex type of the edges to report on.</p>
</li>
<li>
<p><code>"to_type"</code>: Optional. The target vertex type of the edges to report on.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sample_requests_2"><a class="anchor" href="#_sample_requests_2"></a>Sample requests:</h4>
<div class="paragraph">
<p>Below is an example request running <code>stat_vertex_attr</code> on <code>socialNet</code> and its output. The vertex type <code>"Person"</code> has a <code>uint</code> attribute <code>"age"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST "http://localhost:9000/builtins/socialNet" \
-d  '{"function":"stat_vertex_attr","type":"Person"}' | jq .

{
  "version": {
      "api": "v2",
      "schema": 0
   },
  "error": false,
  "message": "",
  "results": [
    {
      "vertexName": "Person",
      "attributeStat": [
        {
          "vattrName": "age",
          "MAX": 64,
          "MIN": 15,
          "AVG": 36.5
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example request running <code>stat_edge_attr</code> on <code>socialNet</code> and its output. The edge type <code>"Liked"</code> has a float attribute <code>"strength"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST "http://localhost:9000/builtins/socialNet" \
-d  '{"function":"stat_edge_attr","type":"Liked", "from_type":"*", "to_type":"*"}' | jq .

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "Liked",
      "attributes": {
        "weight": {
          "MAX": 2.5,
          "MIN": 1,
          "AVG": 1.375
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example request running <code>stat_vertex_number</code> and its output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST "http://localhost:9000/builtins/socialNet" \
-d  '{"function":"stat_vertex_number","type":"*"}' | jq .

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "v_type": "User",
      "count": 4
    },
    {
      "v_type": "Page",
      "count": 4
    },
    {
      "v_type": "Product",
      "count": 7
    },
    {
      "v_type": "DescWord",
      "count": 7
    },
    {
      "v_type": "NameUser",
      "count": 9
    },
    {
      "v_type": "VidUser",
      "count": 4
    },
    {
      "v_type": "Video",
      "count": 5
    },
    {
      "v_type": "AttributeTag",
      "count": 4
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_13"><a class="anchor" href="#_parameters_13"></a>Parameters:</h4>
<div class="paragraph">
<p>No parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_show_graph_schema_metadata"><a class="anchor" href="#_show_graph_schema_metadata"></a>Show graph schema metadata</h3>
<div class="paragraph">
<p><code>GET /gsqlserver/gsql/schema</code></p>
</div>
<div class="paragraph">
<p>Returns schema details about a vertex type, an edge type, or the entire graph schema. This is a GSQL Server request sent to port 14240, and authentication credentials need to be provided.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_9"><a class="anchor" href="#_sample_request_9"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -u tigergraph:tigergraph \
"localhost:14240/gsqlserver/gsql/schema?graph=workNet&amp;type=company"

{
  "error": false,
  "message": "",
  "results": {
    "Config": {
      "STATS": "OUTDEGREE_BY_EDGETYPE",
      "PRIMARY_ID_AS_ATTRIBUTE": false
    },
    "Attributes": [
      {
        "AttributeType": {
          "Name": "STRING"
        },
        "IsPartOfCompositeKey": false,
        "PrimaryIdAsAttribute": false,
        "AttributeName": "id",
        "HasIndex": false,
        "IsPrimaryKey": false
      },
      {
        "AttributeType": {
          "Name": "STRING"
        },
        "IsPartOfCompositeKey": false,
        "PrimaryIdAsAttribute": false,
        "AttributeName": "country",
        "HasIndex": false,
        "IsPrimaryKey": false
      }
    ],
    "PrimaryId": {
      "AttributeType": {
        "Name": "STRING"
      },
      "IsPartOfCompositeKey": false,
      "PrimaryIdAsAttribute": false,
      "AttributeName": "clientId",
      "HasIndex": false,
      "IsPrimaryKey": false
    },
    "Name": "company"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>*Vertex schema object*</em> <strong>fields:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>Name</code></strong>: the vertex type name, same as the input parameter "type"</p>
</li>
<li>
<p><strong><code>PrimaryId</code></strong>: details about the primary id</p>
</li>
<li>
<p><strong><code>Attributes</code></strong>: details about each attribute, listed in order</p>
</li>
<li>
<p><strong><code>Config</code></strong>: details about global properties of the vertex type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>*Edge schema object*</em> <strong>fields:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>Name</code></strong>: the edge type name, same as the input parameter "type"</p>
</li>
<li>
<p><strong><code>FromVertexTypeName</code></strong>: source vertex type name</p>
</li>
<li>
<p><strong><code>ToVertexTypeName</code></strong>: target vertex type name</p>
</li>
<li>
<p><strong><code>Attributes</code></strong>: details about each attribute, listed in order</p>
</li>
<li>
<p><strong><code>IsDirected</code></strong>: whether the edge is directed</p>
</li>
<li>
<p><strong><code>Config</code></strong>: additional details about global properties of the edge type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>*Graph schema object*</em> <strong>fields:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>GraphName</code></strong>: the graph name, same as the input parameter "graph"</p>
</li>
<li>
<p><strong><code>VertexTypes</code></strong>: an array of <em>vertex schema objects</em>. Each vertex schema object is exactly the JSON output if that specific vertex type had been specified.</p>
</li>
<li>
<p><strong><code>EdgeTypes</code></strong>: an array of <em>edge schema objects</em>. Each edge schema object is exactly the JSON output if that specific edge type had been specified.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">{
  "error": false,
  "message": "",
  "results": {
    "GraphName": "workNet",
    "VertexTypes": [
      {
        "Config": {...},
        "Attributes": [...],
        "PrimaryId": {...},
        "Name": "person"},
      {
        "Config": {...},
        "Attributes": [...],
        "PrimaryId": {...},
        "Name": "company"}
    ],
    "EdgeTypes": [
      {
        "IsDirected": false,
        "ToVertexTypeName": "company",
        "Config": {},
        "Attributes": [...],
        "FromVertexTypeName": "person",
        "Name": "worksFor"
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_14"><a class="anchor" href="#_parameters_14"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the graph whose schema to retrieve.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The vertex or edge type whose details to retrieve. If not provided, the endpoint will provide a <em>graph schema object</em> containing the schema details of the entire graph.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_upsert_data_to_graph"><a class="anchor" href="#_upsert_data_to_graph"></a>Upsert data to graph</h3>
<div class="paragraph">
<p><code>POST /graph/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint upserts vertices and/or edges into a graph. To upsert means that if a vertex or edge does not exist, it is inserted, and if it does exist, it is updated.</p>
</div>
<div class="sect3">
<h4 id="_atomic_upsert_transaction"><a class="anchor" href="#_atomic_upsert_transaction"></a>Atomic upsert transaction</h4>
<div class="paragraph">
<p>By default, the <code>POST /graph/{graph_name}</code> endpoint is not atomic. If something goes wrong during the process of the request,  the request data can be partially consumed by the database.</p>
</div>
<div class="paragraph">
<p>You can append a query string parameter <code>atomic_post</code> to the URL of the request and set its value to true to make the request an atomic transaction, which means that updates to the database contained in the request are all-or-nothing. Either all changes are successful, or none is successful.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have the following request to upsert two vertices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">curl --data-binary @vertices.json http://localhost:9000/graph/social</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the content of <code>vertices.json</code> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">{
 "vertices": {
    "person": {
      "Velma": {
        "age": {
           "value": 30
         }
      },
      "Kelly": {
        "age": {
           "value": 22
         }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the request above, if the vertex <code>Kelly</code> fails to be upserted due to a machine failure, it is still possible that the vertex <code>Velma</code> is upserted to the database.</p>
</div>
<div class="paragraph">
<p>If you add the <code>atomic_post</code> parameter to the request URL and set its value to true, the request becomes atomic and if any part of the request body fails to be upserted, nothing will be upserted:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># This is an atomic request
curl --data-binary @vertices.json http://localhost:9000/graph/social?automic_post=true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_15"><a class="anchor" href="#_parameters_15"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 9%;">
<col style="width: 68%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of this parameter can either be <code>"all"</code> or
<code>"none"</code>. <code>"all"</code>: request will return after all GPE instances have
acknowledged the POST <code>"none"</code>: request will return immediately after
RESTPP processed the POST.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>new_vertex_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether or not to
update existing vertices. If the value is true, it will only insert new
vertices and not update existing ones.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertex_must_exist</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether or not to
insert new edges when the <code>FROM</code> or <code>TO</code> vertices don’t exist. If the
value is true, the request will only insert edge if both the <code>FROM</code> and
<code>TO</code> vertices of the edge already exist. If the value is false, the
request will always insert new edges, and create the necessary vertices
with default values for their attributes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The response is the number of vertices and edges that were accepted. The API uses JSON format to describe the vertices and edges to be upserted. The JSON code can be stored in a text file or specified directly in a command line. There is a maximum size for a <code>POST</code> data payload (see the <a href="intro.adoc#_size_and_time_limits"><strong>Size Limits</strong></a> section). The JSON format for describing a vertex set or edge set is summarized below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_request_body_3"><a class="anchor" href="#_request_body_3"></a>Request body:</h4>
<div class="paragraph">
<p>The payload data should be in JSON according to the schema shown below:</p>
</div>
<div class="paragraph">
<p>{% code title="Request bodyd schema" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">"vertices": {
   "&lt;vertex_type&gt;": {
      "&lt;vertex_id&gt;": {
         "&lt;attribute&gt;": {
            "value": &lt;value&gt;,
            "op": &lt;opcode&gt;
         }
      }
   }
},
"edges": {
   "&lt;source_vertex_type&gt;": {
      "&lt;source_vertex_id&gt;": {
         "&lt;edge_type&gt;": {
            "&lt;target_vertex_type&gt;": {
               "&lt;target_vertex_id&gt;": {
                  "&lt;attribute&gt;": {
                     "value": &lt;value&gt;,
                     "op": &lt;opcode&gt;
                  }
               }
            }
         }
      }
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>The fields in angle brackets (<code>&lt;&gt;</code>) are placeholder names or values, to be replaced with actual values. The keys in angle brackets, such as <code>&lt;vertex_type&gt;</code>, can be repeated to form a list of items. The keys which are not in angle brackets are exact texts that must be used as they are. The nested hierarchy means that vertices are grouped by type.  Edges, on the other hand, are first grouped by source vertex type, then vertex ID, then edge type.</p>
</div>
<div class="paragraph">
<p>The first example below shows two <code>User</code> vertices having an attribute called <code>age</code>:</p>
</div>
<div class="paragraph">
<p>{% code title="Upsert Example Data 1: Two User vertices" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"> "vertices": {
    "User": {
      "id6": {
        "age": {
           "value": 30
         }
      },
      "id1": {
        "age": {
           "value": 22
         }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>The second example starts with one <code>User</code> vertex. If <code>id6</code> already exists, it is not changed. If it doesn&#8217;t yet exist, it is created with default attribute values. Then two edges are created: a <code>Liked</code> edge from <code>id1</code> to <code>id6</code>, and then a <code>Liked_By</code> edge from <code>id6</code> to <code>id1</code>.</p>
</div>
<div class="paragraph">
<p>{% code title="Upsert Example Data 2:add_id6.json" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">{
 "vertices": {
    "User": {
      "id6": {
      }
    }
  },
  "edges": {
    "User":{
      "id1": {
        "Liked": {
          "User": {
            "id6" : {
              "weight" : {
                "value": 5.0
              }
            }
          }
        }
      },
      "id6": {
        "Liked_By": {
          "User": {
            "id1" : {
              "weight" : {
                "value": 1.0
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>Follow the instructions in the Introduction section to <a href="intro.adoc#_formatting_data_in_json">format advanced data types</a>. For example, the following payload is used to upsert two <code>User</code> vertices with an attribute <code>coordinates</code> of type <code>LIST</code> and an attribute <code>measurements</code> of type <code>MAP</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">{
 "vertices": {
    "User": {
      "id4": {
        "coordinates": {
           "value": [51.3345, -7.2233]
         },
        "measurements": {
           "value": {
             "keyList": ["chest", "waist", "hip"]
             "valueList": [35, 30, 35]
           }
         }
      },
      "id5": {
        "coordinates": {
           "value": [31.3245, -17.3292]
         },
        "measurements": {
           "value": {
             "keyList": ["chest", "waist", "hip"]
             "valueList": [39, 35, 41]
           }
         }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_operation_codes"><a class="anchor" href="#_operation_codes"></a>Operation codes</h4>
<div class="paragraph">
<p>Each attribute value may be accompanied by an operation (op) code, which provides very sophisticated schemes for data update or insertion:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">op</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"ignore_if_exists"</code> or <code>"~"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the vertex/edge does not exist, use the payload value to initialize the attribute; but if the vertex/edge already exists, do not change this attribute.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"add"</code> or <code>"+"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add the payload value to the existing value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"and"</code> or <code>"&amp;"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update to the logical AND of the payload value and the existing value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"or"</code> or <code>"|"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update to the logical OR of the payload value and the existing value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"max"</code> or <code>"&gt;"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update to the higher value between the payload value and the existing value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"min"</code> or <code>"&lt;"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update to the lower value between the payload value and the existing value.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If an attribute is not given in the payload, the attribute stays unchanged if the vertex/edge already exists, or if the vertex/edge does not exist, a new vertex/edge is created and assigned the default value for that data type. The default value is 0 for <code>int/uint</code>, 0.0 for <code>float/double</code>, and <code>""</code>(empty string) for string.</p>
</div>
</div>
<div class="sect3">
<h4 id="_invalid_data_types_cause_the_request_to_be_rejected"><a class="anchor" href="#_invalid_data_types_cause_the_request_to_be_rejected"></a>Invalid data types cause the request to be rejected</h4>
<div class="paragraph">
<p>The RESTPP server validates the request before updating the values. The following schema violations will cause the entire request to fail and no change will be made to a graph:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For vertex upsert</p>
<div class="ulist">
<ul>
<li>
<p>Invalid vertex type</p>
</li>
<li>
<p>Invalid attribute data type</p>
</li>
</ul>
</div>
</li>
<li>
<p>For edge upsert:</p>
<div class="ulist">
<ul>
<li>
<p>Invalid source vertex type</p>
</li>
<li>
<p>Invalid edge type</p>
</li>
<li>
<p>Invalid target vertex type</p>
</li>
<li>
<p>Invalid attribute data type.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If an invalid attribute name is given, it is ignored.</p>
</div>
</div>
<div class="sect3">
<h4 id="_output_response"><a class="anchor" href="#_output_response"></a>Output response</h4>
<div class="paragraph">
<p>The response is the number of vertices and edges that were accepted. Additionally, if <code>new_vertex_only</code> is true, the response will include two more fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>skipped_vertices</code>: the number of vertices in the input data which already existed in the graph</p>
</li>
<li>
<p><code>vertices_already_exist</code>: the id and type of the input vertices which were skipped</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>vertex_must_exist</code> is true, the response will include two more fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>skipped_edges</code>: the number of edges in the input data rejected because of missing endpoint vertices</p>
</li>
<li>
<p><code>miss_vertices</code>: the id and type of the endpoint vertices which were missing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The example file <code>add_id6.json</code> (shown in the <strong>Request Body</strong> section) upserts one <code>User</code> <em>vertex with <code>id = "id6"</code>, one <code>Liked</code> </em>edge, and one <code>Liked_By</code> <em>edge. The <code>Liked</code> </em>edge is from <code>"id1</code> " to <code>"id6"</code>; the <code>Liked_By</code> <em>_edge is from <code>"id6"</code> to _<code>"id1"</code></em>.</p>
</div>
<div class="paragraph">
<p>The following example submits an upsert request by using the payload data stored in <code>add_id6.json</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">$ curl -X POST --data-binary @add_id6.json \
"http://localhost:9000/graph"

{"accepted_vertices":1,"accepted_edges":2}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vertices"><a class="anchor" href="#_vertices"></a>Vertices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{% hint style="info" %}
To support multiple graphs within one system, the graph data REST endpoint URLs include an optional graph name.
{% endhint %}</p>
</div>
<div class="sect2">
<h3 id="_insert_vertices"><a class="anchor" href="#_insert_vertices"></a>Insert vertices</h3>
<div class="paragraph">
<p>To insert vertices or edges, use the <a href="built-in-endpoints.adoc#_upsert_data_to_graph">Upsert data to graph</a> endpoint.</p>
</div>
</div>
<div class="sect2">
<h3 id="_list_vertices"><a class="anchor" href="#_list_vertices"></a>List vertices</h3>
<div class="paragraph">
<p><code>GET /graph/{graph_name}/vertices/{vertex_type}</code></p>
</div>
<div class="paragraph">
<p>This endpoint returns all vertices having the type <em>`vertex_type`</em> in a graph. __</p>
</div>
<div class="sect3">
<h4 id="_sample_request_10"><a class="anchor" href="#_sample_request_10"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">curl -X GET "http://localhost:9000/graph/socialNet/vertices/User"

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "v_id": "id1",
      "v_type": "User",
      "attributes": {}
    },
    {
      "v_id": "id2",
      "v_type": "User",
      "attributes": {}
    }
    // ... all vertices in graph socialNet of type User
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_16"><a class="anchor" href="#_parameters_16"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the <code>results</code> field will only contain the count of how many vertices were selected. Default is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected vertices to return. The parameter takes a list, which is a string of comma-separated values, and will only return the attributes that are provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditions used to filter the returned vertices. The parameter takes a list of conditions, which is a string of comma-separated values. If any filter conditions are provided, the endpoint will only return the vertices that satisfy the conditions. Six comparison operators are supported for this parameter: <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&lt;=</code>. If the value on the right side of an operator is a string literal, it should be enclosed in double-quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value that specifies the total number of vertices to return</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes to sort the results by. The parameter takes a list, which is a string of comma-separated values, and will sort the returned vertices based on the attributes provided in the list in order. Add "-" in front of the attribute to sort in descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to 0 or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_retrieve_a_vertex"><a class="anchor" href="#_retrieve_a_vertex"></a>Retrieve a vertex</h3>
<div class="paragraph">
<p><code>GET /graph/{graph_name}/vertices/{vertex_type}/{vertex_id}</code></p>
</div>
<div class="paragraph">
<p>This endpoint will return a single vertice by its vertex ID.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_11"><a class="anchor" href="#_sample_request_11"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">curl -X GET "http://localhost:9000/graph/socialNet/vertices/User/id1"

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "v_id": "id1",
      "v_type": "User",
      "attributes": {}
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_17"><a class="anchor" href="#_parameters_17"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected vertices to return. The parameter takes a list, which is a string of comma-separated values, and will only return the attributes that are provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to 0 or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete_vertices"><a class="anchor" href="#_delete_vertices"></a>Delete vertices</h3>
<div class="paragraph">
<p><code>DELETE /graph/{graph_name}/vertices/{vertex_type}</code></p>
</div>
<div class="paragraph">
<p>This endpoint deletes vertices by their vertex type. The delete operation is a cascading deletion. If a vertex is deleted, then all of the edges connected to it are automatically deleted as well.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_12"><a class="anchor" href="#_sample_request_12"></a>Sample request:</h4>
<div class="paragraph">
<p>The response object will contain a <code>"deleted_vertices"</code> field that indicates the number of vertices that were deleted</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X DELETE "http://localhost:9000/graph/socialNet/vertices/User"

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": {
    "v_type": "person",
    "deleted_vertices": 3
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_18"><a class="anchor" href="#_parameters_18"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 10%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permanent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the
deleted vertex IDs can never be inserted back, unless the graph is
dropped or the graph store is cleared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditions used to filter the vertices to delete. The
parameter takes a list of conditions, which is a string of
comma-separated values. If any filter conditions are provided, the
endpoint will only delete the vertices that satisfy the conditions. Six
comparison operators are supported for this parameter: <code>=</code>, <code>!=</code>, <code>&gt;</code>,
<code>&gt;=</code>, <code>&lt;</code> and <code>&#8656;</code>. If the value on the right side of an operator is a
string literal, it should be enclosed in double-quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value that specifies the total number of vertices
to delete.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes to sort the vertices by. In delete
operations,<code>sort</code> should always be used together with <code>limit</code>. The
endpoint will delete the number of vertices under the limit specified in
the order specified. The parameter takes a list of attributes, and the
endpoint will sort all vertices based on the attributes provided in the
list in order. Add <code>"-"</code> in front of the attribute to sort by that
attribute in descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which
the query will time out. If the parameter is set to 0 or isn’t provided,
the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete_vertices_by_type"><a class="anchor" href="#_delete_vertices_by_type"></a>Delete vertices by type</h3>
<div class="paragraph">
<p><code>DELETE /graph/{graph_name}/delete_by_type/vertices/{vertex_type}</code></p>
</div>
<div class="paragraph">
<p>This endpoint deletes all vertices of the given vertex type in a graph.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_13"><a class="anchor" href="#_sample_request_13"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X DELETE "http://localhost:9000/graph/poc_graph/delete_by_type/vertices/person"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_19"><a class="anchor" href="#_parameters_19"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permanent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the deleted vertex IDs can never be inserted back, unless the graph is dropped or the graph store is cleared.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the parameter is set to "none", the delete operation doesn&#8217;t need to get acknowledgment from any GPE. If it is set to "all" (default), the operation needs to get acknowledgment from all GPEs.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete_a_vertex"><a class="anchor" href="#_delete_a_vertex"></a>Delete a vertex</h3>
<div class="paragraph">
<p><code>DELETE /graph/{graph_name}/vertices/{vertex_type}/{vertex_id}</code></p>
</div>
<div class="sect3">
<h4 id="_sample_request_14"><a class="anchor" href="#_sample_request_14"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X DELETE "http://localhost:9000/graph/socialNet/vertices/User/id1"

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": {
    "v_type": "User",
    "deleted_vertices": 1
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_20"><a class="anchor" href="#_parameters_20"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to 0 or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_edges"><a class="anchor" href="#_edges"></a>Edges</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_insert_edges"><a class="anchor" href="#_insert_edges"></a>Insert edges</h3>
<div class="paragraph">
<p>To insert vertices or edges, use the <a href="built-in-endpoints.adoc#_upsert_data_to_graph">Upsert data to graph</a> endpoint.</p>
</div>
</div>
<div class="sect2">
<h3 id="_list_edges_of_a_vertex"><a class="anchor" href="#_list_edges_of_a_vertex"></a>List edges of a vertex</h3>
<div class="paragraph">
<p><code>GET /graph/{graph_name}/edges/{source_vertex_type}/{source_vertex_id}</code></p>
</div>
<div class="paragraph">
<p>This endpoint returns all edges which are connected to a given vertex ID in the graph</p>
</div>
<div class="sect3">
<h4 id="_sample_request_15"><a class="anchor" href="#_sample_request_15"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/graph/socialNet/edges/VidUser/0?limit=2

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "2",
      "to_type": "Video",
      "attributes": {
        "rating": 5.2,
        "date_time": 0
      }
    },
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "0",
      "to_type": "Video",
      "attributes": {
        "rating": 6.8,
        "date_time": 0
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_21"><a class="anchor" href="#_parameters_21"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the <code>results</code> field will only contain the count of how many edges were selected. Default is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected edges to return. The parameter takes a list, which is a string of comma-separated values. If <code>select</code> is provided, the edges returned will only show the attributes provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditions used to filter the edges to return. The parameter takes a list of conditions, which is a string of comma-separated values. If any filter conditions are provided, the endpoint will only return the edges that satisfy the conditions. Six comparison operators are supported for this parameter: <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&lt;=</code>. If the value on the right side of an operator is a string literal, it should be enclosed in double-quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value that specifies the maximum limit of the total number of edges to return.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes to sort the results by. The parameter takes a list, which is a string of comma-separated values, and will sort all the edges based on the attributes provided in the list in order. Add <code>"-"</code> in front of the attribute to sort in descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to <code>0</code> or isn&#8217;t provided, system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_list_edges_of_a_vertex_by_edge_type"><a class="anchor" href="#_list_edges_of_a_vertex_by_edge_type"></a>List edges of a vertex by edge type</h3>
<div class="paragraph">
<p><code>GET /graph/{graph_name}/edges/{source_vertex_type}/{source_vertex_id}/{edge_type}</code></p>
</div>
<div class="paragraph">
<p>This endpoint lists all the edges of a specified type connected to a given vertex ID in the graph</p>
</div>
<div class="sect3">
<h4 id="_sample_request_16"><a class="anchor" href="#_sample_request_16"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/graph/socialNet/edges/VidUser/0/User_Video?limit=2

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "2",
      "to_type": "Video",
      "attributes": {
        "rating": 5.2,
        "date_time": 0
      }
    },
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "0",
      "to_type": "Video",
      "attributes": {
        "rating": 6.8,
        "date_time": 0
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_22"><a class="anchor" href="#_parameters_22"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the <code>results</code> field will only contain the count of how many edges were selected. Default is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected edges to return. The parameter takes a list, which is a string of comma-separated values. If <code>select</code> is provided, the edges returned will only show the attributes provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditions used to filter the edges to return. The parameter takes a list of conditions, which is a string of comma-separated values. If any filter conditions are provided, the endpoint will only return the edges that satisfy the conditions. Six comparison operators are supported for this parameter: <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&lt;=</code>. If the value on the right side of an operator is a string literal, it should be enclosed in double quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value that specifies the maximum limit of the total number of edges to return.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes to sort the results by. The parameter takes a list, which is a string of comma-separated values, and will sort all the edges based on the attributes provided in the list in order. Add <code>"-"</code> in front of the attribute to sort in descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to <code>0</code> or isn&#8217;t provided, system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_list_edges_of_a_vertex_by_edge_type_and_target_type"><a class="anchor" href="#_list_edges_of_a_vertex_by_edge_type_and_target_type"></a>List edges of a vertex by edge type and target type</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">GET /graph/{graph_name}/edges/{source_vertex_type}/{source_vertex_id}/{edge_type}/{target_vertex_type}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This endpoint lists edges connected to a given vertex by edge type and target vertex type</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
Use <code>"_"</code> for <code>edge_type</code> in the URL to permit any edge type.
{% endhint %}</p>
</div>
<div class="sect3">
<h4 id="_sample_request_17"><a class="anchor" href="#_sample_request_17"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-php hljs" data-lang="php">curl -X GET "http://localhost:9000/graph/socialNet/edges/VidUser/0/User_Video/Video?limit=2

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "2",
      "to_type": "Video",
      "attributes": {
        "rating": 5.2,
        "date_time": 0
      }
    },
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "0",
      "to_type": "Video",
      "attributes": {
        "rating": 6.8,
        "date_time": 0
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_23"><a class="anchor" href="#_parameters_23"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes a boolean value. If the value is true, the <code>results</code> field will only contain the count of how many edges were selected. Default is <code>false</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not_wildcard</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether or not <code>"<em>"</code> supplied in the endpoint URL is a wildcard. If the parameter is true, <code>"</em>"</code> is interpreted literally to select only edges with edge type name equal to underscore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected edges to return. The parameter takes a list, which is a string of comma-separated values. If <code>select</code> is provided, the edges returned will only show the attributes provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditions used to filter the edges to return. The parameter takes a list of conditions, which is a string of comma-separated values. If any filter conditions are provided, the endpoint will only return the edges that satisfy the conditions. Six comparison operators are supported for this parameter: <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> and <code>&lt;=</code>. If the value on the right side of an operator is a string literal, it should be enclosed in double-quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer value that specifies the maximum limit of the total number of edges to return.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes to sort the results by. The parameter takes a list, which is a string of comma-separated values, and will sort all the edges based on the attributes provided in the list in order. Add <code>"-"</code> in front of the attribute to sort in descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to <code>0</code> or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_retrieve_edge_by_source_target_and_edge_type"><a class="anchor" href="#_retrieve_edge_by_source_target_and_edge_type"></a>Retrieve edge by source, target, and edge type</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">GET /graph/{graph_name}/edges/{source_vertex_type}/{source_vertex_id}/{edge_type}/{target_vertex_type}/{target_vertex_id}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This endpoint returns the edge of a specified type between a source vertex and a target vertex.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_18"><a class="anchor" href="#_sample_request_18"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/graph/socialNet/edges/VidUser/0/User_Video/Video/2"

{
  "version": {
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "User_Video",
      "directed": false,
      "from_id": "0",
      "from_type": "VidUser",
      "to_id": "2",
      "to_type": "Video",
      "attributes": {
        "rating": 5.2,
        "date_time": 0
      }
    }
   ]
 }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_24"><a class="anchor" href="#_parameters_24"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes of the selected edges to return. The parameter takes a list, which is a string of comma-separated values. If <code>select</code> is provided, the edges returned will only show the attributes provided.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to <code>0</code> or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete_an_edge"><a class="anchor" href="#_delete_an_edge"></a>Delete an edge</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">DELETE /graph/{graph_name}/edges/{source_vertex_type}/{source_vertex_id}/{edge_type}/{target_vertex_type}/{target_vertex_id}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Deletes an edge by its source vertex type and ID, target vertex type and ID, as well as edge type.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_19"><a class="anchor" href="#_sample_request_19"></a>Sample request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -X DELETE "https://crunch.i.tgcloud.io:9000/graph/CrunchBasePre_2013/edges/person/p:23601/work_for_company/company/c:14478"

# Response
{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "e_type": "work_for_company",
      "deleted_edges": 1
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_25"><a class="anchor" href="#_parameters_25"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specifies the number of seconds after which the query will time out. If the parameter is set to 0 or isn&#8217;t provided, the system-wide endpoint timeout setting is applied.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_queries"><a class="anchor" href="#_queries"></a>Queries</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_get_query_metadata"><a class="anchor" href="#_get_query_metadata"></a>Get query metadata</h3>
<div class="paragraph">
<p><code>GET /gsqlserver/gsql/queryinfo</code></p>
</div>
<div class="paragraph">
<p>Returns metadata details about a query. In particular, it lists the input parameters and output <code>PRINT</code> statement syntax. <strong>This endpoint exists on port 14240 and requests are sent to the GSQL server.</strong> Therefore, you should provide authentication credentials in the request.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_20"><a class="anchor" href="#_sample_request_20"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gsql hljs" data-lang="gsql">$ curl -u tigergraph:tigergraph -X GET \
"http://localhost:14240/gsqlserver/gsql/queryinfo?graph=workNet&amp;query=to_vertex_setTest"

{
  "output": [
    {
      "v": "vertex"
    },
    {
      "@@v2": "SetAccum&lt;vertex&gt;"
    },
    {
      "S2": [
        {
          "v_id": "int",
          "attributes": {
            "interestList": "INT_LIST",
            "skillSet": "INT_SET",
            "skillList": "INT_LIST",
            "locationId": "STRING",
            "interestSet": "INT_SET",
            "id": "STRING"
          },
          "v_type": "person"
        },
        {
          "v_id": "int",
          "attributes": {
            "country": "STRING",
            "id": "STRING"
          },
          "v_type": "company"
        }
      ]
    },
    {
      "SDIFF.size()": "int"
    }
  ],
  "input": {
    "uid": "string",
    "uids": "set&lt;string&gt;",
    "vtype": "string"
  },
  "queryname": "to_vertex_setTest",
  "error": false,
  "message": "",
  "version": {
    "schema": 0,
    "edition": "DEVELOPER_EDITION",
    "api": "V2"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON response object contains three fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>queryname</code></strong>: name of the query, same as the query input parameter.</p>
</li>
<li>
<p><strong><code>input</code></strong>: unordered list of the input parameter names and data types.</p>
</li>
<li>
<p><strong><code>output</code></strong>: JSON object that follows the same structure of the query&#8217;s output. For each key-value pair, the key is the name that appears in the query output, while the values are the data types of the output.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_26"><a class="anchor" href="#_parameters_26"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graph</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the graph</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>query</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the query</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_run_an_installed_query_get"><a class="anchor" href="#_run_an_installed_query_get"></a>Run an installed query (<code>GET</code>)</h3>
<div class="paragraph">
<p><code>GET /query/{graph_name}/{query_name}</code></p>
</div>
<div class="paragraph">
<p>Each time a new TigerGraph query is installed, a dynamic endpoint is generated. This new endpoint enables the user to run the new TigerGraph query through HTTP requests and giving the parameters in URL or in a data payload. In the case of a <code>GET</code> request, parameters should be passed in through the query string.</p>
</div>
<div class="sect3">
<h4 id="_parameters_27"><a class="anchor" href="#_parameters_27"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read_committed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether to use <a href="https://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Read_committed">read-committed isolation level</a> for the query. At the read committed level, it is guaranteed that any data read is committed at the moment it is read. By default, it is off.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_query_parameter_passing"><a class="anchor" href="#_query_parameter_passing"></a>Query parameter passing</h4>
<div class="paragraph">
<p>When using a <code>GET</code> request to run an installed query, the query parameters are <a href="intro.adoc#_query_string_parameter_passing">passed in through the query string of the URL</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28%;">
<col style="width: 36%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter type</th>
<th class="tableblock halign-left valign-top">Query string format</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of primitives</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign multiple values to the same parameter
name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set <code>p1</code> of integers: <code><strong>p1=1&amp;p1=5&amp;p1=10</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VERTEX&lt;type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the ID of the vertex:`parameterName=vertex_id`</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A
vertex with parameter name <code>vp</code> and an ID of person2: <code><strong>vp=person2</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VERTEX</code>(type not pre-specified)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use two query string
parameters<strong>:</strong><code>parameterName=vertex_id\'\'parameterName.type=vertex_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A vertex with parameter name <code>va</code> , type <code>person</code> and and ID
<code>person1</code>:`va=person1&amp;va.type=person`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of <code>VERTEX&lt;type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign multiple vertex IDs to the same
<code>SET</code> or <code>BAG</code> parameter name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set parameter named <code>vp</code> of vertices
of type person:`vp=person3&amp;vp=person4`</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of <code>VERTEX</code>(type not pre-specified)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>SET</code> or <code>BAG</code> must
be treated as an array. A vertex ID and type must be provided for the
vertex element at each index.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A set parameter named <code>vp</code> of
vertices:`vp[0]=person1&amp;vp[0].type=person&amp;vp[1]=11&amp;vp[1].type=post`</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_specify_replica"><a class="anchor" href="#_specify_replica"></a>Specify replica</h4>
<div class="paragraph">
<p>If you have a TigerGraph HA cluster, you can specify a query to run on a particular replica with the HTTP header <code>GSQL-REPLICA</code>. The value of the header needs to be an integer within the range one to the replication factor of the cluster. If you supply a invalid value for the header, the request will return an error.</p>
</div>
</div>
<div class="sect3">
<h4 id="_specify_thread_limit"><a class="anchor" href="#_specify_thread_limit"></a>Specify thread limit</h4>
<div class="paragraph">
<p>When running a query through RESTPP, you can specify a limit on the number of threads that the query is allowed to use on each node through the HTTP header <code>GSQL-THREAD-LIMIT</code>. The number of threads used by a query means the number of vCPUs used by the query. By default, a query will use all threads that are available on a machine.</p>
</div>
<div class="paragraph">
<p>For example, if you have a cluster of three nodes, each with 8 vCPUs, then a query will use all 8 threads available on a node in the cluster by default. By providing a thread limit in the request header, you can limit the query to only use a number of threads under the limit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_21"><a class="anchor" href="#_sample_request_21"></a>Sample request:</h4>
<div class="paragraph">
<p>To run query <code>hello</code> on a graph named <code>social</code>, and the query parameter is of type <code>VERTEX&lt;person&gt;</code> whose ID is <code>"Tom"</code></p>
</div>
<div class="paragraph">
<p>{% code title="Running a query via HTTP request" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/query/social/hello?p=Tom"

# Limiting the query to use under 4 threads
curl -x GET -H "GSQL-THREAD-LIMIT: 4" "http://localhost:9000/query/social/hello?p=Tom"

# Specifying the query to run on the first replica
curl -X GET -H "GSQL-REPLICA: 2" "http://localhost:9000/query/social/hello?p=Tom"

# Specifying the query to run on the primary cluster
curl -X GET -H "GSQL-REPLICA: 1" "http://localhost:9000/query/social/hello?p=Tom"</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_an_installed_query_post"><a class="anchor" href="#_run_an_installed_query_post"></a>Run an installed query (<code>POST</code>)</h3>
<div class="paragraph">
<p><code>POST /query/{graph_name}/{query_name}</code></p>
</div>
<div class="paragraph">
<p>Users can also run queries through a <code>POST</code> request, which allows them to pass query parameters in JSON. This is especially helpful when the query takes complex parameters.</p>
</div>
<div class="sect3">
<h4 id="_parameters_28"><a class="anchor" href="#_parameters_28"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read_committed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean value that indicates whether to use <a href="https://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Read_committed">read-committed isolation level</a> for the query. At the read committed level, it is guaranteed that any data read is committed at the moment it is read. By default, it is off.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_query_parameter_passing_2"><a class="anchor" href="#_query_parameter_passing_2"></a>Query parameter Passing</h4>
<div class="paragraph">
<p>When using a <code>POST</code> request to run an installed query, the query parameters are passed in through the request body and <a href="intro.adoc#_formatting_data_in_json">encoded in JSON format</a>. The formatting rules for the JSON payload is the same as <a href="#3.2@gsql-ref:querying:query-operations.adoc#_parameter_json_object" class="page unresolved">using JSON to pass in parameters in the <code>RUN QUERY</code> command</a>.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 99%;">
<colgroup>
<col style="width: 28%;">
<col style="width: 36%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter type</th>
<th class="tableblock halign-left valign-top">Syntax</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a string formatted as <code>"YYYY-MM-DD HH-MM-SS"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"2019-02-19 19:19:19"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of primitives</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a JSON array containing the primitive
values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>["a", "list", "of", "args"]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VERTEX&lt;type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a JSON object containing a field <code>"id"</code> for the
vertex ID and a field <code>"type"</code> for the type of the vertex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{"id": "person1",\'\'"type": "person"}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VERTEX</code> (type not specified)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a JSON object containing a field
<code>"id"</code> for the vertex ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{"id": "person1"}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of <code>VERTEX&lt;type&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a JSON array containing a list of
JSON <code>VERTEX&lt;type&gt;</code> object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[{"id": "person1"}, {"id": "person2"}]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set or bag of vertices of unspecified types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use a JSON array
containing a list of JSON <code>VERTEX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[{"id": "person1",\'\'"type": "person"},{"id": "person2",\'\'"type": "person"}]</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_specify_replica_2"><a class="anchor" href="#_specify_replica_2"></a>Specify replica</h4>
<div class="paragraph">
<p>If you have a TigerGraph HA cluster, you can specify a query to run on a particular replica with the HTTP header <code>GSQL-REPLICA</code>. The value of the header needs to be an integer within the range one to the replication factor of the cluster. If you supply an invalid value for the header, the request will return an error.</p>
</div>
</div>
<div class="sect3">
<h4 id="_specify_thread_limit_2"><a class="anchor" href="#_specify_thread_limit_2"></a>Specify thread limit</h4>
<div class="paragraph">
<p>When running a query through RESTPP,  you can specify a limit on the number of threads that the query is allowed to use on each node through the HTTP header <code>GSQL-THREAD-LIMIT</code>. The number of threads used by a query means the number of vCPUs used by the query. By default, a query will use all threads that are available on a machine.</p>
</div>
<div class="paragraph">
<p>For example, if you have a cluster of three nodes, each with 8 vCPUs, then a query will use all 8 threads available on a node in the cluster by default. By providing a thread limit in the request header, you can limit the query to only use a number of threads under the limit.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_22"><a class="anchor" href="#_sample_request_22"></a>Sample request</h4>
<div class="paragraph">
<p>The query in this sample request takes a parameter of type <code>VERTEX&lt;person&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST -d '{"p":{"id":"Tom","type":"person"}}' \
"http://localhost:9000/query/social/hello"

# Specify that the query run on the first replica
curl -X POST -d -H "GSQL-REPLICA: 2" '{"p":{"id":"Tom","type":"person"}}' \
"http://localhost:9000/query/social/hello"

# Specify that the query run on the primary cluster
curl -X POST -d -H "GSQL-REPLICA: 1" '{"p":{"id":"Tom","type":"person"}}' \
"http://localhost:9000/query/social/hello"

# Specify that the query run on
curl -X POST -d -H "GSQL-THREAD-LIMIT: 4" '{"p":{"id":"Tom","type":"person"}}' \
"http://localhost:9000/query/social/hello"</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
Installed queries can run in <a href="../gsql-ref/querying/query-operations.md#detached-mode-async-option">Detached Mode</a>. To do this, use the <code>GSQL-ASYNC</code>header and set its value to <code>true</code>. The <a href="built-in-endpoints.adoc#_check_query_status_detached_mode">results</a> and <a href="built-in-endpoints.adoc#_check_query_status_detached_mode">status</a> of the queries run in Detached Mode can be retrieved with a query ID, which is returned immediately when queries are executed in Detached Mode.
{% endhint %}</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_an_interpreted_query"><a class="anchor" href="#_run_an_interpreted_query"></a>Run an interpreted query</h3>
<div class="paragraph">
<p><code>POST /gsqlserver/interpreted_query</code></p>
</div>
<div class="paragraph">
<p>This endpoint runs a GSQL query in Interpreted Mode. The query body should be supplied at the data payload, and the query&#8217;s parameters are supplied as the URL&#8217;s query string. <strong>This endpoint exists on the GSQL server on port 14240.</strong></p>
</div>
<div class="paragraph">
<p>This request goes directly to the GSQL server (port 14240) instead of the RESTPP server (port 9000), so the username and password must be specified in the header. If you are using curl, you can use the <code>-u</code> option as shown below.</p>
</div>
<div class="sect3">
<h4 id="_request_body_4"><a class="anchor" href="#_request_body_4"></a>Request body:</h4>
<div class="paragraph">
<p>The request body for this endpoint should be the entire <code>INTERPRET QUERY</code> statement.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameter_passing"><a class="anchor" href="#_parameter_passing"></a>Parameter passing:</h4>
<div class="paragraph">
<p>When running an interpreted query through this endpoint, the query parameters should be <a href="intro.adoc#_query_string_parameters">passed in through the URL query string</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_23"><a class="anchor" href="#_sample_request_23"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">curl --fail -u &lt;my_username&gt;:&lt;my_password&gt; -X POST \
"http://localhost:14240/gsqlserver/interpreted_query?a=10" \
-d 'INTERPRET QUERY (INT a) FOR GRAPH gsql_demo {
    PRINT a;
 }'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_list_running_queries"><a class="anchor" href="#_list_running_queries"></a>List running queries</h3>
<div class="paragraph">
<p><code>GET /showprocesslist/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint reports statistics of running queries of a graph: the query&#8217;s request ID, start time, expiration time, and the REST endpoint&#8217;s URL.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_24"><a class="anchor" href="#_sample_request_24"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET "http://localhost:9000/showprocesslist/poc_graph" | jq .

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "requestid": "65538.RESTPP_1_1.1558386411523.N",
      "startTime": "2019-05-20 14:06:51.523",
      "expirationTime": "2019-05-20 14:15:11.523",
      "url": "/sleepgpe?milliseconds=100001"
    },
    {
      "requestid": "196609.RESTPP_1_1.1558386401478.N",
      "startTime": "2019-05-20 14:06:41.478",
      "expirationTime": "2019-05-20 14:15:01.478",
      "url": "/sleepgpe?milliseconds=100000"
    }
  ],
  "code": "REST-0000"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_29"><a class="anchor" href="#_parameters_29"></a>Parameters:</h4>
<div class="paragraph">
<p>No Parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_abort_a_query"><a class="anchor" href="#_abort_a_query"></a>Abort a query</h3>
<div class="paragraph">
<p><code>GET /abortquery/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint safely aborts a selected query by ID or all queries of an endpoint by endpoint URL of a graph.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_25"><a class="anchor" href="#_sample_request_25"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">curl -X GET "localhost:9000/abortquery/poc_graph?requestid=16842763.RESTPP_1_1.1561401340785.N&amp;requestid=16973833.RESTPP_1_1.1561401288421.N"

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [
    {
      "aborted_queries": [
        {
          "requestid": "16842763.RESTPP_1_1.1561401340785.N",
          "url": "/sleepgpe?milliseconds=110000"
        },
        {
          "requestid": "16973833.RESTPP_1_1.1561401288421.N",
          "url": "/sleepgpe?milliseconds=100000"
        }
      ]
    }
  ],
  "code": "REST-0000"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_30"><a class="anchor" href="#_parameters_30"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The ID of the query to abort. It can take a single query ID or the string <code>"all"</code>. If <code>requestid</code> is set to all. It will abort all running queries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The endpoint whose running queries to abort. You must specify the base of the endpoint&#8217;s URL, but then use a wildcard to allow for different parameters. For example, to abort all running queries for the endpoint <code>/sleepgpe</code>, use <code>url=/sleepgpe.*</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_check_query_status_detached_mode"><a class="anchor" href="#_check_query_status_detached_mode"></a>Check query status (Detached Mode)</h3>
<div class="paragraph">
<p><code>GET /query_status</code></p>
</div>
<div class="paragraph">
<p>This endpoint allows you to check the status of a query run in <a href="#3.2@gsql-ref:querying:query-operations.adoc#_detached_mode_async_option" class="page unresolved">detached mode</a>.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_26"><a class="anchor" href="#_sample_request_26"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -s -X GET "http://localhost:9000/query_status?graph_name=poc_graph&amp;requestid=4.RESTPP_1_1.1599672031541.N"

{
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "error": false,
  "message": "",
  "results": [{
    "requestid": "4.RESTPP_1_1.1599672031541.N",
    "startTime": "2020-09-09 10:20:31.541",
    "expirationTime": "2020-09-09 10:20:47.541",
    "url": "/query/ldbc_snb/countIndirectFriends?pid=21990232555889",
    "elapsedTime": 19,
    "status": "success"
  }]
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Field</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the given query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status of the given query. Possible values are <code>“success”</code>, <code>“timeout”</code>, <code>“aborted”</code>, or <code>“running”</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timestamp for the start time of the given query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The query ID associated with the given query status JSON object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expirationTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timestamp for when the given query times out. The default timeout limit is 16 seconds and can be set using the <a href="intro.adoc#_gsql_query_timeout"><code>GSQL-TIMEOUT</code></a> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>elapsedTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elapsed real time of the given query measured in milliseconds. For completed queries, the value shows the total runtime of the request. For ongoing queries, it shows the amount of time taken so far.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If one or more of the provided query IDs (<code>requestid</code>) are invalid, the return JSON will include an<code>unknown_requestid</code>field containing all the invalid query IDs. If a query ID is marked as unknown, it means either the query does not exist or that it was not run in Detached Mode.</p>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_31"><a class="anchor" href="#_parameters_31"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22%;">
<col style="width: 78%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Field</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the given query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status of the given query. Possible values are
<code>“success”</code>, <code>“timeout”</code>, <code>“aborted”</code>, or <code>“running”</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timestamp for the start time of the given query.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The query ID associated with the given query status JSON
object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expirationTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timestamp for when the given query times out. The
default timeout limit is 16 seconds and can be set using
thehttps://docs.tigergraph.com/v/3.2/dev/restpp-api/intro#gsql-query-timeout[<code>GSQL-TIMEOUT</code>]
header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>elapsedTime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Elapsed real time of the given query measured in
milliseconds. For completed queries, the value shows the total runtime
of the request. For ongoing queries, it shows the amount of time taken
so far.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_check_query_results_detached_mode"><a class="anchor" href="#_check_query_results_detached_mode"></a>Check query results (Detached Mode)</h3>
<div class="paragraph">
<p><code>GET /query_result</code></p>
</div>
<div class="paragraph">
<p>This endpoint allows you to check the results of queries run in Detached Mode if they have finished running. If the query is still running, the endpoint will respond with an error and a message saying <code>"Unable to retrieve result for query &lt;requestid&gt;"</code>.  Ensure that the query is finished before checking its result.</p>
</div>
<div class="sect3">
<h4 id="_sample_request_27"><a class="anchor" href="#_sample_request_27"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gsql hljs" data-lang="gsql">$ curl -s -X GET curl -s -X GET "http://localhost:9000/query_result?requestid=196611.RESTPP_1_1.1630601692834.N"

{
  "error": false,
  "message": "",
  "version": {
    "edition": "enterprise",
    "api": "v2",
    "schema": 0
  },
  "results": [{"vSet": [{
    "v_id": "21990232555889",
    "attributes": {"vSet.@friendCount": 13677},
    "v_type": "Person"
  }]}]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_32"><a class="anchor" href="#_parameters_32"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requestid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String ID of the query.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_path_finding_algorithms"><a class="anchor" href="#_path_finding_algorithms"></a>Path-Finding Algorithms</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The TigerGraph platform comes with two built-in endpoints, <code>/shortestpath</code> and <code>/allpaths</code>, which return either the shortest or all unweighted paths connecting a set of source vertices to a set of target vertices. The table below summarizes the two path-finding endpoints.</p>
</div>
<div class="sect2">
<h3 id="_input_parameters_and_output_format_for_path_finding"><a class="anchor" href="#_input_parameters_and_output_format_for_path_finding"></a>Input Parameters and Output Format for Path-Finding</h3>
<div class="paragraph">
<p>Each REST endpoint reads a JSON-formatted payload that describes the input parameters. These parameters specify which vertices and edges may be on the paths, additional conditions on the attributes of the vertices and edges, and the maximum length of a path.</p>
</div>
<div class="sect3">
<h4 id="_source_and_target_vertices"><a class="anchor" href="#_source_and_target_vertices"></a>Source and target vertices</h4>
<div class="paragraph">
<p>Each endpoint must have either a <strong>source</strong> or <strong>sources</strong> key and either a <strong>target</strong> or <strong>targets</strong> parameter. The source and target parameters describe a single vertex. The format for a vertex object is as follows: <code>{"type" : "&lt;vertex_type_name&gt;", "id" : "&lt;vertex_id&gt;"}.</code>  The sources and targets parameters are JSON arrays containing a list of vertex objects.</p>
</div>
<div class="paragraph">
<p><strong>Filters</strong><br>
The payload may also have an array of filter conditions, to restrict the vertices or edges in the paths. Each individual filter is a JSON object which describes a condition on one vertex type or edge type.  A filter object has one or two key-value pairs: <code>{"type": "&lt;vertex_or_edge_type&gt;", "condition": "&lt;attribute_condition&gt;"}</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"type":</code> the vertex type or edge type to be filtered</p>
</li>
<li>
<p><code>"condition"</code> (optional): a boolean expression on one attribute of the given vertex type or edge type. "AND" and "OR" may be used to make compound expressions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example of a filter array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-markup hljs" data-lang="markup">[{"type": "bought", "condition": "price &lt; \"100\" and quality == \"good\""},
 {"type": "sold",   "condition": "price &gt; \"100\"  or quality != \"good\""}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that all filtering conditions in <strong><code>vertexFilters</code></strong> and <strong><code>edgeFilters</code></strong> are combined with the <code>"OR"</code>  relationship, i.e., if a vertex (or edge) fulfills any one of the filter conditions, then this vertex (or edge) will be included in the resulting paths.</p>
</div>
</div>
<div class="sect3">
<h4 id="_output"><a class="anchor" href="#_output"></a>Output</h4>
<div class="paragraph">
<p>The JSON output is a list of vertices and a list of edges. Each vertex and each edge is listed in full, with all attributes.  The collections of vertices and edges are not in path order.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_find_shortest_path"><a class="anchor" href="#_find_shortest_path"></a>Find shortest path</h3>
<div class="paragraph">
<p><code>POST /shortestpath/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint takes a source vertex or a set of source vertices, a target vertex or a set of target vertices, and returns the shortest path between the source and the target. If the source is a set of vertices, the resulting path will begin with one of the vertices in the set. If the target is a set of vertices, the resulting path will end with one of the vertices in the set.</p>
</div>
<div class="sect3">
<h4 id="_request_body_5"><a class="anchor" href="#_request_body_5"></a>Request body:</h4>
<div class="paragraph">
<p>This endpoint expects a request body that describes the source and target vertex or vertex set. Below is a table of all the fields in the request body.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must start from this vertex. Mutually exclusive with <code>sources</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must start from one of these vertices. Mutually exclusive with <code>source</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must end at this vertex. Mutually exclusive with <code>targets</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>targets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must end at one of these vertices. Mutually exclusive with <code>target</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertexFilters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(OPTIONAL) Restrict the paths to those whose vertices satisfy any of the given filters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>edgeFilters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(OPTIONAL) Restrict the paths to those whose edges satisfy any of the given filters. See details of filters above.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sample_request_28"><a class="anchor" href="#_sample_request_28"></a>Sample request:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -s -X POST "http://localhost:9000/shortestpath/movieNet" \
-d '{
  "sources":[{"type":"VidUser","id":"2"}],
  "targets":[{"type":"VidUser","id":"0"}, {"type":"VidUser","id":"3"}],
  "edgeFilters":[{"type":"User_Video","condition":"rating &gt; 5 and date_time &gt; 1000"}],
  "maxLength":4
}'

# Result is an array of vertex json objects and edge json objects,
# describing the subgraph for all found vertices and edges.
{
  "version": { "edition": "developer", "api": "v2", "schema": 0 },
  "error": false,
  "message": "Cannot get 'vertex_filters' filters, use empty filter.",
  "results": [
    {
      "vertices": [
        { "v_id": "3","v_type": "VidUser","attributes": { "name": "Dale" }},
        { "v_id": "0","v_type": "Video","attributes": { "name": "Solo", "year", 2018 }},
        { "v_id": "0","v_type": "VidUser","attributes": { "name": "Angel" }},
      ],
      "edges": [
        {
          "e_type": "User_Video", "from_id": "0", "from_type": "Video",
          "to_id": "0", "to_type": "VidUser", "directed": false,
          "attributes": { "rating": 6.8, "date_time": 15000 }
        },
        {
          "e_type": "User_Video", "from_id": "0", "from_type": "Video",
          "to_id": "3", "to_type": "VidUser",  "directed": false,
          "attributes": { "rating": 6.6, "date_time": 16000 }
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parameters_33"><a class="anchor" href="#_parameters_33"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer that specified the maximum length of a shortest path. The default value is 6.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allShortestPaths</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <strong>true</strong>, the endpoint will return all shortest paths between the source and target. Default is <strong>false</strong>, meaning that the endpoint will return only one path.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_find_all_paths"><a class="anchor" href="#_find_all_paths"></a>Find all paths</h3>
<div class="paragraph">
<p><code>POST /allpaths/{graph_name}</code></p>
</div>
<div class="paragraph">
<p>This endpoint finds all paths between a source vertex (or vertex set) and target vertex (or vertex set).</p>
</div>
<div class="sect3">
<h4 id="_request_body_6"><a class="anchor" href="#_request_body_6"></a>Request body:</h4>
<div class="paragraph">
<p>This endpoint expects a request body that describes the source and target vertex or vertex set. Below is a table of all the fields in the request body.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must start from this vertex. Mutually exclusive with <code>sources</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must start from one of these vertices. Mutually exclusive with <code>source</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must end at this vertex. Mutually exclusive with <code>targets</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>targets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vertex array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each path must end at one of these vertices. Mutually exclusive with <code>target</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertexFilters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(OPTIONAL) Restrict the paths to those whose vertices satisfy any of the given filters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>edgeFilters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(OPTIONAL) Restrict the paths to those whose edges satisfy any of the given filters. See details of filters above.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_parameters_34"><a class="anchor" href="#_parameters_34"></a>Parameters:</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum path length.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>{% hint style="danger" %}
The current implementation of this endpoint will include paths with loops. Since it is possible to go around a loop an infinite number of times, it is important that you select the smallest value of maxLength which you consider appropriate.  Even if there are no loops in your graph, a smaller maxLength will allow your query to run faster.
{% endhint %}</p>
</div>
</div>
<div class="sect3">
<h4 id="_sample_request_29"><a class="anchor" href="#_sample_request_29"></a>Sample request:</h4>
<div class="paragraph">
<p>The example below requests all paths between the source vertex set {Video 0} and the target vertex set {AttributeTag "action"}, up to maximum length 3. The path may only contain Video vertices where <code>year &gt;= 1984</code>. The result includes 3 paths:<br>
AttrributeTag "action" &#8201;&#8212;&#8201; Video 0<br>
AttrributeTag "action" &#8201;&#8212;&#8201; Video 3&#8201;&#8212;&#8201;VidUser 4&#8201;&#8212;&#8201;Video 0<br>
AttrributeTag "action" &#8201;&#8212;&#8201; Video 2&#8201;&#8212;&#8201;VidUser 0&#8201;&#8212;&#8201;Video 0</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -s -X POST "http://localhost:9000/allpaths/movieNet" \
-d '{
  "sources":[{"type":"Video","id":"0"}],
  "targets":[{"type": "AttributeTag", "id":"action"}],
  "vertexFilters":[{"type":"Video", "condition":"year &gt;= 1984"}],
  "maxLength": 3
}'

# Result is an array of vertex json objects and edge json objects,
# indicating the subgraph for all found vertices and edges.
{
  "version": { "edition": "developer", "api": "v2", "schema": 0 },
  "error": false,
  "message": "Cannot get 'edge_filters' filters, use empty filter.",
  "results": [
    {
      "vertices": [
        { "v_id": "action","v_type": "AttributeTag","attributes": {}},
        { "v_id": "3","v_type": "VidUser","attributes": { "name": "Dale" }},
        { "v_id": "0","v_type": "VidUser","attributes": { "name": "Angel" }},
        { "v_id": "0","v_type": "Video","attributes": { "name": "Solo", "year", 2018 }},
        { "v_id": "2","v_type": "Video","attributes": { "name": "Thor", "year", 2011 }},
        { "v_id": "4","v_type": "Video","attributes": { "name": "Ran", "year", 1985 }}
      ],
      "edges": [
        {
          "e_type": "Video_AttributeTag", "from_id": "0", "from_type": "Video",
          "to_id": "action", "to_type": "AttributeTag", "directed": false,
          "attributes": { "weight": 1, "date_time": 0 }
        },
        {
          "e_type": "Video_AttributeTag", "from_id": "4", "from_type": "Video",
          "to_id": "action", "to_type": "AttributeTag", "directed": false,
          "attributes": { "weight": 1, "date_time": 11000 }
        },
        {
          "e_type": "User_Video", "from_id": "3", "from_type": "VidUser",
          "to_id": "4", "to_type": "Video", "directed": false,
          "attributes": { "rating": 8.4, "date_time": 12000 }
        },
        {
          "e_type": "User_Video", "from_id": "3", "from_type": "VidUser",
          "to_id": "0", "to_type": "Video", "directed": false,
          "attributes": { "rating": 6.6, "date_time": 16000 }
        },
        {
          "e_type": "Video_AttributeTag", "from_id": "2", "from_type": "Video",
          "to_id": "action", "to_type": "AttributeTag", "directed": false,
          "attributes": { "weight": 1, "date_time": 0 }
        },
        {
          "e_type": "User_Video", "from_id": "2", "from_type": "VidUser",
          "to_id": "0", "to_type": "Video", "directed": false,
          "attributes": { "rating": 7.4, "date_time": 17000 }
        },
        {
          "e_type": "User_Video", "from_id": "0", "from_type": "Video",
          "to_id": "0", "to_type": "VidUser", "directed": false,
          "attributes": { "rating": 6.8, "date_time": 15000 }
        }
      ]
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other versions of pathfinding algorithms are available in the <a href="#graph-ml:intro.adoc" class="page unresolved">GSQL Graph Algorithm Library</a>.</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
