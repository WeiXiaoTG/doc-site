<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Get Started with Docker :: TigerGraph Server User Guide</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Server User Guide</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-server" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../installation/install.html">TigerGraph Server User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/internal-architecture.html">TigerGraph Internal Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="docker.html">Getting started with Docker</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/install.html">Installation Guide</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The GSQL Shell</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gsql-shell/using-a-remote-gsql-client.html">Using a Remote GSQL Client</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Definition</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-definition/README.html">Data Definition</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data loading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-loading/s3-loader-user-guide.html">AWS S3 Loader User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../data-loading/spark-connection-via-jdbc-driver.html">Spark Connection Via JDBC Driver</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">System management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/README.html">System Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../administration/management-with-gadmin.html">Managing with gadmin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/user-access/README.html">User Access Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backup and Restore</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backup-and-restore/backup-and-restore.html">Backup and Restore</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST API Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../API/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../API/built-in-endpoints.html">Built-in Endpoints</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text">References</span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Server User Guide</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../installation/install.html">TigerGraph Server User Guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../installation/install.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-gui/3.2/graphstudio/overview.html">TigerGraph Web UI Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../installation/install.html">TigerGraph Server User Guide</a></li>
    <li>Getting Started</li>
    <li><a href="docker.html">Getting started with Docker</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/tg-server/edit/main/modules/getting-started/pages/docker.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Get Started with Docker</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document provides step-by-step instructions on how to pull the latest TigerGraph Enterprise Edition docker image to your host machine. You can follow the sections in sequence to set up the TigerGraph docker environment.</p>
</div>
<div class="paragraph">
<p>The latest TigerGraph docker image includes the following content:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The latest version of TigerGraph</p>
</li>
<li>
<p>Linux packages:</p>
<div class="ulist">
<ul>
<li>
<p>openssh-server</p>
</li>
<li>
<p>git</p>
</li>
<li>
<p>wget</p>
</li>
<li>
<p>curl</p>
</li>
<li>
<p>emac</p>
</li>
<li>
<p>vim</p>
</li>
<li>
<p>jq</p>
</li>
<li>
<p>tar</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tutorial material</p>
<div class="ulist">
<ul>
<li>
<p>GSQL 101</p>
</li>
<li>
<p>GSQL 102</p>
</li>
</ul>
</div>
</li>
<li>
<p>The latest GSQL open-source graph algorithm library</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This follow-along video shows the whole setup process: <a href="https://www.youtube.com/watch?v=V5VvgJyjLxA" class="bare">https://www.youtube.com/watch?v=V5VvgJyjLxA</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1_install_docker_desktop"><a class="anchor" href="#_1_install_docker_desktop"></a>1. Install Docker Desktop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Follow the steps below to install Docker Desktop on your machine and configure it with sufficient resources for TigerGraph:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Docker on your OS:</p>
<div class="ulist">
<ul>
<li>
<p>To install Docker for Mac OS, follow this video: <a href="https://www.youtube.com/watch?v=MU8HUVlJTEY" class="bare">https://www.youtube.com/watch?v=MU8HUVlJTEY</a></p>
</li>
<li>
<p>To install Docker for Linux, follow these instructions:</p>
<div class="ulist">
<ul>
<li>
<p>Centos: <a href="https://docs.docker.com/install/linux/docker-ce/centos/" class="bare">https://docs.docker.com/install/linux/docker-ce/centos/</a></p>
</li>
<li>
<p>Ubuntu: <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" class="bare">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>To install Docker for Windows OS, follow this video: <a href="https://www.youtube.com/watch?v=ymlWt1MqURY" class="bare">https://www.youtube.com/watch?v=ymlWt1MqURY</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure Docker Desktop with sufficient resources:</p>
<div class="ulist">
<ul>
<li>
<p>Recommended: 4 cores and 16GB memory</p>
</li>
<li>
<p>Minimum: 2 cores and 10GB memory</p>
</li>
<li>
<p>Click the Docker Desktop icon, click <strong>Preferences</strong> &gt;&gt; <strong>Resources</strong>, drag the CPU and Memory sliders to the desired configuration, save and restart Docker Desktop</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_prepare_a_shared_folder_on_host_os_to_be_shared_with_docker_container"><a class="anchor" href="#_2_prepare_a_shared_folder_on_host_os_to_be_shared_with_docker_container"></a>2. Prepare a Shared Folder on Host OS to be shared with Docker Container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open a shell on your host machine and create or select a directory for sharing data between your host machine and docker container. Grant read+write+execute permission to the folder. For example, to create a folder called data in Linux:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ mkdir data
    $ chmod 777 data</pre>
</div>
</div>
<div class="paragraph">
<p>You can mount (map) the data folder to a folder under the docker container, which allows you to share files between your host OS and Docker OS.</p>
</div>
<div class="paragraph">
<p>For example, if you mount the host OS folder <code>~/data</code> to the docker folder <code>/home/tigergraph/mydata</code>,  then anything you put on <code>~/data</code> will be visible in the docker container under <code>/home/tigergraph/mydata</code>, and vice versa.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_run_tigergraph_docker_image_as_a_daemon"><a class="anchor" href="#_3_run_tigergraph_docker_image_as_a_daemon"></a>3. Run TigerGraph Docker image as a daemon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run the following command to pull the TigerGraph docker image, bind ports, map a shared data folder, and start a container from the image. Note: this command is very long; please make sure you copy the whole command by dragging the scroll bar to the end:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker run -d -p 14022:22 -p 9000:9000 -p 14240:14240 --name tigergraph --ulimit nofile=1000000:1000000 -v ~/data:/home/tigergraph/mydata -t docker.tigergraph.com/tigergraph:latest</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Here is a breakdown of the options and arguments in the command:</p>
<div class="ulist">
<ul>
<li>
<p><code>-d</code>: make the container run in the background.</p>
</li>
<li>
<p><code>-p</code>: map docker 22 port to host OS 14022 port, 9000 port to host OS 9000 port, 14240 port to host OS 14240 port.</p>
</li>
<li>
<p><code>--name</code>: name the container tigergraph.</p>
</li>
<li>
<p><code>--ulimit</code>: set the <code>ulimit</code> (the number of open file descriptors per process) to 1 million.</p>
</li>
<li>
<p><code>-v</code>: mount the host OS <code>~/data</code> folder to the docker <code>/home/tigergraph/mydata</code> folder using the -v option. If you are using Windows, change the above ~/data to something using windows file system convention, e.g. <code>c:\data</code></p>
</li>
<li>
<p><code>-t</code>: allocate a pseudo-TTY</p>
</li>
<li>
<p><code>docker.tigergraph.com/tigergraph:latest</code>:  download the latest docker image from the TigerGraph docker registry URL docker.tigergraph.com/tigergraph.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
Replace "latest" with a specific version number if a dedicated version of TigerGraph is to be used. E.g., if you want to get the 3.0.5 version, the URL should be:</p>
</div>
<div class="paragraph">
<p><code>docker.tigergraph.com/tigergraph:3.0.5</code></p>
</div>
<div class="paragraph">
<p>To use the legacy developer editions, use:</p>
</div>
<div class="paragraph">
<p><code>docker.tigergraph.com/tigergraph-dev</code>
{% endhint %}</p>
</div>
<div class="paragraph">
<p>If you use Windows and have disk drive permission issues with the above command,  try the following command instead (this command does not map the shared folder on your host machine to your container) :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker run -d -p 14022:22 -p 9000:9000 -p 14240:14240 --name tigergraph --ulimit nofile=1000000:1000000 -t docker.tigergraph.com/tigergraph:latest</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_4_use_ssh_to_connect_to_your_container"><a class="anchor" href="#_4_use_ssh_to_connect_to_your_container"></a>4. Use SSH to connect to your container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After launching the container, you can use SSH to connect to your container:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that the container is running. You should see a row that describes the running container after running the command below:</p>
<div class="listingblock">
<div class="content">
<pre>$ docker ps | grep tigergraph</pre>
</div>
</div>
</li>
<li>
<p>Use ssh to open a shell to the container. At the prompt, enter <code>tigergraph</code>  as the password. Note that we have mapped the host 14022 port to the container&#8217;s 22 port (the ssh default port), so on the host we use ssh to connect to port 14022.</p>
<div class="listingblock">
<div class="content">
<pre>$ ssh -p 14022 tigergraph@localhost</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_start_tigergraph"><a class="anchor" href="#_5_start_tigergraph"></a>5. Start TigerGraph</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>After connecting to the container via ssh, inside the container, start all TigerGraph services with the following command (which may take up to one minute):</p>
<div class="listingblock">
<div class="content">
<pre>$ gadmin start all</pre>
</div>
</div>
</li>
<li>
<p>Run the <code>gsql</code> command as shown below to start the GSQL shell. If you are new to TigerGraph, you can run the <a href="../gsql-101/">GSQL 101</a> tutorial now.</p>
<div class="listingblock">
<div class="content">
<pre>$ gsql
GSQL &gt;</pre>
</div>
</div>
</li>
<li>
<p>Start GraphStudio, TigerGraph&#8217;s visual IDE, by visiting <code>http://localhost:14240</code></p>
<div class="paragraph">
<p>in a browser on your laptop (host OS).</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operation_commands_cheat_sheet"><a class="anchor" href="#_operation_commands_cheat_sheet"></a>Operation Commands Cheat Sheet</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>After you start Docker Desktop, use the commands below to stop and restart the container:</p>
<div class="listingblock">
<div class="content">
<pre>  $ docker container stop tigergraph
  $ docker container start tigergraph</pre>
</div>
</div>
</li>
<li>
<p>Start the TigerGraph service within the container:</p>
<div class="listingblock">
<div class="content">
<pre>  $ gadmin start all
  $ gadmin stop  all</pre>
</div>
</div>
</li>
<li>
<p>ssh to the container. Note: if localhost is not recognized, remove the localhost entry from ~/.ssh/known_hosts</p>
<div class="listingblock">
<div class="content">
<pre>  $ sed -i.bak '/localhost/d' ~/.ssh/known_hosts
  $ ssh -p 14022 tigergraph@localhost</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Linux users can access the container through its ip address directly:</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre>  $ docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' tigergraph
  $vssh tigergraph@&lt;container_ip_address&gt;</pre>
</div>
</div>
</li>
<li>
<p>Default user: <code>tigergraph</code></p>
</li>
<li>
<p>Default password: <code>tigergraph</code></p>
</li>
<li>
<p>After running <code>gadmin start</code>, you can go to GraphStudio. Open a browser on your laptop (host OS) and access GraphStudio at the following URL:</p>
<div class="listingblock">
<div class="content">
<pre>  http://localhost:14240</pre>
</div>
</div>
</li>
<li>
<p>Check the version of GSQL:</p>
<div class="listingblock">
<div class="content">
<pre>$ gsql version</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
