<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>User Privileges and Authentication :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 3.0.0-alpha.8">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-server" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../installation/install.html">TigerGraph Server User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/internal-architecture.html">TigerGraph Internal Architecture</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/docker.html">Getting started with Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Get started with cloud images</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getting-started/cloud-images/aws.html">Get Started on AWS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/install.html">Installation Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/upgrade.html">Upgrade Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../installation/uninstallation.html">Uninstallation</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">The GSQL Shell</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../gsql-shell/using-a-remote-gsql-client.html">Using a Remote GSQL Client</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data Definition</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data-definition/README.html">Data Definition</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data loading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data-loading/s3-loader-user-guide.html">AWS S3 Loader User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../data-loading/spark-connection-via-jdbc-driver.html">Spark Connection Via JDBC Driver</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">System management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/README.html">System Management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../administration/management-with-gadmin.html">Managing with gadmin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="README.html">User Access Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backup and Restore</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../backup-and-restore/backup-and-restore.html">Backup and Restore</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST API Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../API/intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../API/built-in-endpoints.html">Built-in Endpoints</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text">References</span>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Server User Guide</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../gsql-ref/3.2/intro/intro.html">GSQL Language Reference</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../gsql-ref/3.2/intro/intro.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../tigergraph-cloud/latest/start/README.html">TigerGraph Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tigergraph-cloud/latest/start/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../tigergraph-data-science/3.2/intro/overview.html">TigerGraph Data Science Library</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tigergraph-data-science/3.2/intro/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../installation/install.html">TigerGraph Server User Guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../installation/install.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../tigergraph-gui/3.2/graphstudio/overview.html">TigerGraph Web UI Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../installation/install.html">TigerGraph Server User Guide</a></li>
    <li><a href="user-privileges-and-authentication.html">User Privileges and Authentication</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/tg-server/edit/main/modules/security/pages/user-access/user-privileges-and-authentication.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">User Privileges and Authentication</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>{% hint style="info" %}
Creation and management of multiple users and roles is available in the Enterprise Edition only.
{% endhint %}</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a><strong>Overview</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The TigerGraph platform provides a complete and robust feature set to manage and control user privilege and authentication of GSS operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation and management of multiple TigerGraph users</p>
</li>
<li>
<p>Granting to each user a role on a particular graph, each role entailing a set of privileges</p>
</li>
<li>
<p>Oauth 2.0-style user authentication</p>
</li>
<li>
<p>Extensible framework, so that additional security- and user- related capabilities can be added in future releases</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../.gitbook/assets/9.1%20%281%29%20%281%29.png" alt="9.1%20%281%29%20%281%29">
</div>
</div>
<div class="sect2">
<h3 id="_users_and_credentials"><a class="anchor" href="#_users_and_credentials"></a>Users and Credentials</h3>
<div class="paragraph">
<p><span class="image"><img src="../../../.gitbook/assets/mg_logo_32.jpg" alt="mg logo 32"></span> TigerGraph&#8217;s role-based access control system naturally extends to a multiple graph system: A user is granted a role on a particular graph. The superuser role (new in TigerGraph 1.2) is defined for administration of the entire unified supergraph.</p>
</div>
<div class="paragraph">
<p>TigerGraph users exist only with the TigerGraph platform; they are different than operating system users . When the system is first installed, an initial user is automatically created. The default name for this initial user is tigergraph , with password tigergraph . This user has full administrative privilege and can create additional users and can set their privileges (see <a href="user-privileges-and-authentication.md#roles-and-privileges">Roles and Privileges</a>). For simplicity, we will refer to this initial superuser as the tigergraph user.</p>
</div>
<div class="paragraph">
<p>If user authentication is enabled (see the section <a href="user-privileges-and-authentication.md#enabling-and-using-user-authentication">Enabling and Using User Authentication</a>), the TigerGraph system will execute a requested operation only if the requester provides <em>credentials</em> for a <em>user</em> who has the <em>privilege</em> to perform the requested operation.</p>
</div>
<div class="paragraph">
<p>The TigerGraph system offers two options for credentials.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>username-password pair</p>
</li>
<li>
<p>a token:  a unique 32-character string which can be used for REST&#43;&#43; requests, with an expiration date.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_and_using_user_authentication"><a class="anchor" href="#_enabling_and_using_user_authentication"></a><strong>Enabling and Using User Authentication</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>When the TigerGraph platform is first installed, user authentication is disabled. The installation process creates a gsql superuser who has the name tigergraph and password tigergraph. As long as user tigergraph&#8217;s password is tigergraph, gsql authentication remains disabled. This is designed for user convenience in single-user configurations or installations which do not require security, such as demo and training installations. The behavior is compatible with early TigerGraph versions which did not support multiple roles or multiple graphs.</p>
</div>
<div class="paragraph">
<p>Because there are two ways to access the TigerGraph system, either through the GSQL shell or through REST&#43;&#43; requests, there are two steps needed to set up a secure system with user authentication for both points of entry:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To enable user authentication for GSQL: change the password of the tigergraph user to something other than tigergraph.</p>
</li>
<li>
<p>To enable Oauth 2 authentication for REST&#43;&#43;, use the gadmin program to configure the RESTPP.Authentication parameter. See details below.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>More details about each of these two steps are below.</p>
</div>
<div class="sect2">
<h3 id="_gsql_authentication"><a class="anchor" href="#_gsql_authentication"></a><strong>GSQL Authentication</strong></h3>
<div class="paragraph">
<p>To enable user authentication for GSQL: change the password of the tigergraph user to something other than tigergraph.  See ALTER PASSWORD below.</p>
</div>
<div class="paragraph">
<p>To run a single GSQL command or command file, the user must provide their username and password.  The graph also needs to be specified. To specify the username in the command line, use the -u option.  The user can also provide their password with the -p option. If the password is not provided on the command line, the system will then prompt the user for their password, so this method is only appropriate for interactive use.  If -u not used, then the system will assume that the request is coming from the default tigergraph user.  It will then prompt for tigergraph&#8217;s password (assuming GSQL authentication is enabled). Note that if -u is not used and authentication is disabled, then the system simply responses to all requests, as it did in earlier versions (unprotected administrative mode).</p>
</div>
<div class="paragraph">
<p>Use the -g parameter to specify which graph on which to operate.</p>
</div>
<div class="paragraph">
<p>{% code title="Running one GSQL command or command line, with username, graph name, and password" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gsql [-u username] [-p pasword] [-g gname] &lt;commmand&gt;
Password: ********</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>To enter the GSQL interactive shell, simply omit the &lt;command&gt; from the command line. The user does not need to provide credentials again inside the shell.  The example below shows two users entering the shell with their passwords. The user does not need to specify a graph to enter the interactive shell.</p>
</div>
<div class="paragraph">
<p>{% code title="Examples: entering with interactive shell" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gsql
Password for tigergraph: ********
Welcome to GSQL Shell version: 1.2

GSQL &gt; SHOW USER
Users:
  - Name: tigergraph
    - Roles: admin, observer

GSQL &gt; EXIT

$ gsql -u frank
Password for frank: ******
Welcome to GSQL Shell version: 1.2

GSQL &gt; SHOW USER
  - Name: frank
    - Secret: *************************
    - Roles: designer, observer

GSQL &gt; EXIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>{% hint style="danger" %}
Authorization for <code>gadmin</code></p>
</div>
<div class="paragraph">
<p>Currently, authorization for <code>gadmin</code> commands comes from Linux, and is not related to GSQL authorization. In short, only the Linux TigerGraph user can run <code>gadmin</code>.</p>
</div>
<div class="paragraph">
<p>Details: During installation, the user selects a name and password for the TigerGraph Linux user. The default user and password are tigergraph and tigergraph, respectively. This user is a Linux user; the installer will create a Linux account if needed. Only the TigerGraph Linux user can run <code>gadmin</code>. This Linux user is unrelated to the TigerGraph default user mentioned in the GSQL Authentication section.
{% endhint %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_rest_authentication"><a class="anchor" href="#_rest_authentication"></a>REST&#43;&#43; Authentication</h3>
<div class="paragraph">
<p>The REST&#43;&#43; server implements OAuth 2.0-style authorization as follows: Each user can create one or more secrets (unique pseudorandom strings). Each secret is associated with a particular user and the user&#8217;s privileges for a particular graph. Anyone who has this secret can invoke a special REST endpoint to generate authorization tokens (other pseudorandom strings). An authorization token can then be used to perform TigerGraph database operations via other REST endpoints. According to OAuth 2.0 protocol, each token will expire after a certain period of time. The TigerGraph default lifetime for a token is 1 month.</p>
</div>
<div class="paragraph">
<p>Each REST&#43;&#43; request should contain an authorization token in the HTTP header. The REST&#43;&#43; server reads the header. If the token is not valid, REST&#43;&#43; will refuse to run the query and instead will return an authentication error.</p>
</div>
<div class="sect3">
<h4 id="_enabling_rest_authentication"><a class="anchor" href="#_enabling_rest_authentication"></a>Enabling REST&#43;&#43; Authentication</h4>
<div class="paragraph">
<p>The token authentication of REST&#43;&#43; can be turned on by using the following commands:</p>
</div>
<div class="paragraph">
<p>{% code title="Enabling REST&#43;&#43; OAuth Authentication" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gadmin config set RESTPP.Factory.EnableAuth true
gadmin config apply
gadmin restart restpp nginx gui -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_tokens"><a class="anchor" href="#_creating_tokens"></a>Creating tokens</h4>
<div class="paragraph">
<p>A user must have a secret before they create a token. Secrets are generated in GSQL (see CREATE SECRET below). The endpoint <a href="../../../dev/restpp-api/intro.md#requesting-a-token-with-get-requesttoken"><code>GET /requesttoken</code></a> is used to create a token. The endpoint has two parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>secret</code> (required): the user&#8217;s secret</p>
</li>
<li>
<p><code>lifetime</code> (optional): the lifetime for the token, in seconds. The default is one month, approximately 2.6 million seconds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>{% code title="Example: REST&#43;&#43; Request to Generate a Token" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET 'localhost:9000/requesttoken?secret=jiokmfqqfu2f95qs6ug85o89rpkneib3&amp;lifetime=1000000'</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>The maximum number of tokens that can be created is set by a configuration named <code>GSQL.UserInfoLimit.TokenSizeLimit</code> . Its default value is 20000 and can be changed with <a href="../system-management/management-with-gadmin.md#gadmin-config"><code>gadmin config</code></a> commands.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_tokens"><a class="anchor" href="#_using_tokens"></a>Using tokens</h4>
<div class="paragraph">
<p>Once REST&#43;&#43; authentication is enabled, a token should always be included in the HTTP header. If you are using curl to format and submit your REST&#43;&#43; requests, then use the following syntax:</p>
</div>
<div class="paragraph">
<p>{% code title="curl GSQL request, with authorization token in header" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X GET -H "Authorization: Bearer &lt;token&gt;" 'http://localhost:9000/query/graphname/queryname?param1=val1&amp;param2=val2'</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect3">
<h4 id="_deleting_tokens"><a class="anchor" href="#_deleting_tokens"></a>Deleting tokens</h4>
<div class="paragraph">
<p>GSQL deletes expired tokens at regular intervals. The length of this interval in seconds is set by a system configuration named <code>GSQL.TokenCleaner.IntervalTimeSec</code> and is set to <code>10800</code> by default, which means TigerGraph deletes all expired tokens every 10800 seconds (3 hours). To change this interval, use <a href="../system-management/management-with-gadmin.md#gadmin-config"><code>gadmin config</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">$ gadmin config set GSQL.TokenCleaner.IntervalTimeSec &lt;new_interval_length&gt;
$ gadmin config apply</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also give expired tokens a grace period with the <code>GSQL.TokenCleaner.GraceTimeSec</code> configuration. This configuration indicates the number of seconds after a token expires during which it will not be deleted automatically by GSQL and is set to <code>0</code> by default. To change the grace period, use <a href="../system-management/management-with-gadmin.md#gadmin-config"><code>gadmin config</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">$ gadmin config set GSQL.TokenCleaner.GraceTimeSec &lt;grace_period_length&gt;
$ gadmin config apply</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
 When you use the RUN QUERY command in the GSQL language, this triggers a curl command within the GSQL system. GSQL will automatically use (and generate, if necessary) a token in the curl request for an authorized user.
{% endhint %}</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_roles_and_privileges"><a class="anchor" href="#_roles_and_privileges"></a><strong>Roles and Privileges</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The TigerGraph system includes seven predefined roles&#8201;&#8212;&#8201;superuser, admin, designer, querywriter, queryreader, and observer. Each role has a fixed and logical set of privileges to perform operations. These roles form a hierarchy, with superuser being at the top.  Broadly speaking,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <strong>observer</strong> (formerly "public") can log on, view the schema and other catalog details for its designated graph, and change their own password.</p>
</li>
<li>
<p>A <strong>queryreader</strong> has all observer privileges, and can also run existing loading jobs and queries for its designated graph.</p>
</li>
<li>
<p>A <strong>querywriter</strong> has all queryreader privileges, and can also create queries and run data-manipulation commands on its designated graph.</p>
</li>
<li>
<p>A <strong>designer</strong> (formerly "architect") has all querywriter privileges, and can modify the schema, create loading jobs for its designated graph.</p>
</li>
<li>
<p>A <strong>globaldesigner</strong> has all designer privileges, and can create global schema as well as create objects. Additionally, this role will have the ability to delete graph created by the same user, but will not have the ability to run &#8216;Clear graph store&#8217; command.</p>
</li>
<li>
<p>An <strong>admin</strong> has all designer privileges, and can also create or drop users and grant or revoke roles for its designated graph.  That is, an admin can control the existence and privileges of other users on its graph.</p>
</li>
<li>
<p>A <strong>superuser</strong> automatically has admin privileges on all graphs, and can also create global vertex and edge types, create multiple graphs, and clear the database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The detailed permissions for each role are listed in the following table. Except for the superuser and globaldesigner, the scope of privilege is always limited to one&#8217;s own graph.  In some cases, the behavior of the operation depends on one&#8217;s privilege level.  More detailed descriptions of the User Management commands are given later in this document.  For details about the Graph Definition, Loading, Querying, and Modification commands, see the GSQL Language Reference documents.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1111%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command  Type</th>
<th class="tableblock halign-left valign-top">Operations</th>
<th class="tableblock halign-left valign-top">super- user</th>
<th class="tableblock halign-left valign-top">admin</th>
<th class="tableblock halign-left valign-top">global-designer</th>
<th class="tableblock halign-left valign-top">designer</th>
<th class="tableblock halign-left valign-top">query- writer</th>
<th class="tableblock halign-left valign-top">query- reader</th>
<th class="tableblock halign-left valign-top">observer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User  Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Drop User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alter (Change) Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grant/Revoke Role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Drop/Show Secret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schema  Design</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Drop Vertex/Edge/Graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear Graph Store</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drop All</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use Graph</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use Global</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Run Global Schema_Change Job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Run Schema_Change Job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Loading and  Querying</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Drop Loading Job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create/Interpret/ Install/Drop Query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Typedef</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offline to Online Job Translation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run Loading Job</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data  Modification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upsert/Delete/ Select Commands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>{% hint style="danger" %}
 Commands not listed above are by default accessible with at least observer).
{% endhint %}</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_and_managing_users"><a class="anchor" href="#_creating_and_managing_users"></a><strong>Creating and Managing Users</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>{% hint style="info" %}
<span class="image"><img src="../../../.gitbook/assets/mg_logo_32.jpg" alt="mg logo 32"></span> A superuser can create and manage users globally, including creating admin users for local graphs. An admin can create and manage users with their local graph.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>The TigerGraph installation process creates one user called tigergraph <em>**</em>who has the superuser role.  The superuser role has full privilege to perform any action, included creating or removing other users, and assigning roles to the other users. A superuser can create other superusers, who would also have full privilege.</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
 The user tigergraph is permanent. It cannot be dropped by another admin user.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>Most of the commands in this section can be run only by a superuser or an admin user. The exception is SHOW USER.  Any user can display their own profile.</p>
</div>
<div class="paragraph">
<p>{% code title="User Management Commands" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE USER
DROP USER &lt;user1&gt;,...&lt;userN&gt;
SHOW USER
ALTER PASSWORD [&lt;user1&gt;]
GRANT ROLE admin [ON GRAPH &lt;gname&gt;] TO &lt;user1&gt;,...&lt;userN&gt;
REVOKE ROLE admin [ON GRAPH &lt;gname&gt;] FROM &lt;user1&gt;,...&lt;userN&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="sect2">
<h3 id="_quoted_usernames"><a class="anchor" href="#_quoted_usernames"></a>Quoted Usernames</h3>
<div class="paragraph">
<p>If a username contains more than ASCII alphanumeric characters, it is recommended that the name be enclosed in backquote characters, to ensure that the name is treated as a literal string. This applies to the CREATE/DROP USER and GRANT/REVOKE ROLE commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp hljs" data-lang="cpp">tigergraph:GSQL &gt; CREATE USER
User Name : `name@tigergraph.com`</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_user"><a class="anchor" href="#_create_user"></a>CREATE USER</h3>
<div class="paragraph">
<p>Required privilege: superuser, admin<br>
Create a new user.  GSQL will prompt for the user name and password.</p>
</div>
<div class="paragraph">
<p>{% code title="Example: Create user" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tigergraph:GSQL &gt; CREATE USER
User Name : frank
New Password : ************
Re-enter Password : ************
The user "frank" is created.</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>The maximum number of users on a database is set by a configuration named <code>GSQL.UserInfoLimit.UserSizeLimit</code>. Its default value is 12000 and can be changed with <a href="../system-management/management-with-gadmin.md#gadmin-config"><code>gadmin config</code></a> commands.</p>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
The maximum size of all user information, including users, secrets, and tokens is set by the configuration <code>GSQL.UserInfoLimit.UserCatalogFileMaxSizeByte</code>. It is set to 2097152 by default and has a hard limit of 2097152. In reality, this allows for around 18000 users if every user has a token and a secret.<br>
{% endhint %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_drop_user"><a class="anchor" href="#_drop_user"></a>DROP USER</h3>
<div class="paragraph">
<p>Required privilege: superuser, admin<br>
Delete the listed users.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">DROP USER &lt;user1&gt;,...&lt;userN&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% hint style="danger" %}
 The command takes effect with no warning and cannot be undone.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>{% code title="Example: Drop two users" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">tigergraph:GSQL &gt; DROP USER hermione, jk
Password: *********
The user "hermione" is dropped.
The user "jk" is dropped.</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_show_user"><a class="anchor" href="#_show_user"></a>SHOW USER</h3>
<div class="paragraph">
<p>Required privilege: any<br>
Display user&#8217;s name, role, secret, and token. Non-admin/superuser users see only their own information.  Admin/superuser users see information for all users.</p>
</div>
<div class="paragraph">
<p>{% code title="Example: admin user showing profile information for all users" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">tigergraph:GSQL &gt; SHOW USER
Users:
  - Name: tigergraph
    - Roles: admin, observer

  - Name: frank
    - Secret: ************************
      - Token: j13nv837thrr19u0ahjr8m0is2ded6kk expire at: 2017-09-13 15:18:05
    - Roles: designer, observer

  - Name: jk
    - Roles: observer

  - Name: hermione
    - Roles: observer</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_grantrevoke_role"><a class="anchor" href="#_grantrevoke_role"></a>GRANT/REVOKE ROLE</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">GRANT ROLE &lt;rolename&gt; [ON GRAPH &lt;gname&gt;] TO &lt;user1&gt;,...&lt;userN&gt;
REVOKE ROLE &lt;rolename&gt; [ON GRAPH &lt;gname&gt;] FROM &lt;user1&gt;,...&lt;userN&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required privilege: superuser, admin<br>
Grant a role (or revoke a role) for a user, which add s (or removes) privileges.</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
 <span class="image"><img src="../../../.gitbook/assets/mg_logo_32.jpg" alt="mg logo 32"></span> The ON GRAPH clause is required unless the role being granted/revoked is superuser.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>The example below grants the queryreader role to two users, revokes it from one of the them (jk), and then grants the querywriter role to both users.</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
Even if user is granted superuser role, all previous granted roles for the specific user are still displayed.
{% endhint %}</p>
</div>
<div class="paragraph">
<p>{% code title="Example: Granting and Revoking Roles" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">GSQL &gt; GRANT ROLE queryreader ON GRAPH Hogwarts TO jk,hermione
Role "queryreader" is successfully granted to user(s): jk, hermione

GSQL &gt; REVOKE ROLE queryreader ON GRAPH Hogwarts FROM hermione
Role "queryreader" is successfully revoked from user(s): hermione

GSQL &gt; GRANT ROLE querywriter ON GRAPH London TO hermione,jk
Role "querywriter" is successfully granted to user(s): hermione, jk

GSQL &gt; GRANT ROLE superuser to hermione
Role "superuser" is successfully granted to user(s): hermione

GSQL &gt; SHOW USER
Users:
* - Name: tigergraph
    - Roles: superuser

  - Name: hermione
    - Roles: superuser
      - GraphName: London
        - Roles: querywriter

  - Name: jk
    - Roles:
      - GraphName: Hogwarts
        - Roles: queryreader
      - GraphName: London
        - Roles: querywriter</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
 <span class="image"><img src="../../../.gitbook/assets/mg_logo_32.jpg" alt="mg logo 32"></span> A user can have more than one role.  For example, jk can be a queryreader on the Hogwarts graph and a querywriter on the London graph.
{% endhint %}</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_credentials"><a class="anchor" href="#_managing_credentials"></a><strong>Managing Credentials</strong></h2>
<div class="sectionbody">
<div class="paragraph">
<p>When user authentication is enabled, the TigerGraph system will execute a requested operation only if the requester provides credentials for a user who has the privilege to perform the requested operation.</p>
</div>
<div class="paragraph">
<p>The TigerGraph system offers two options for credentials.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>user name and password pair.</p>
</li>
<li>
<p>a token:  a unique 32-character string that can be used for REST&#43;&#43; requests.  A token expires 1 month from the date of creation by default</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following set of commands are used to create and manage passwords, authentication secrets, and authentication tokens.</p>
</div>
<div class="paragraph">
<p>{% code title="GSQL Commands for Managing Credentials" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">ALTER PASSWORD [user1]
CREATE SECRET [alias1]
SHOW SECRET
DROP SECRET &lt;secret1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>{% hint style="info" %}
 Like any other GSQL commands, the user must supply credentials to run these commands. In order to create a secret, the user must supply their password.
{% endhint %}</p>
</div>
<div class="sect2">
<h3 id="_passwords"><a class="anchor" href="#_passwords"></a>Passwords</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">ALTER PASSWORD [&lt;user1&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the above <code>ALTER PASSWORD</code> command to change a user&#8217;s password. Any user can change their own password, but only <code>superuser</code> or <code>admin</code> can change other users' passwords.</p>
</div>
<div class="paragraph">
<p>If a username is not provided, the command changes the password of the current user. As an <code>admin/superuser</code>, to change the password of another user, specify the username of the user whose password you wish to change:</p>
</div>
<div class="paragraph">
<p>{% code title="Example: User changing his/her own password" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">herminone:GSQL &gt; ALTER PASSWORD
Password: *******
New Password : ************
Re-enter Password : ************
Password has been changed.</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>{% code title="Example: Admin changing another user&#8217;s password" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">tigergraph:GSQL &gt; ALTER PASSWORD hermione
Password: *******
New Password : ************
Re-enter Password : ************
Password has been changed.</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
</div>
<div class="sect2">
<h3 id="_secrets"><a class="anchor" href="#_secrets"></a>Secrets</h3>
<div class="paragraph">
<p>{% code title="GSQL Commands for Managing Secrets" %}</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">DROP SECRET &lt;secret1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>{% endcode %}</p>
</div>
<div class="paragraph">
<p>Secrets are unique strings that serve as a user&#8217;s credentials in certain circumstances. A user can have multiple secret strings. Each secret is associated with one user and their role for one graph. If the role is revoked, the secret also becomes invalid.</p>
</div>
<div class="sect3">
<h4 id="_create_a_secret"><a class="anchor" href="#_create_a_secret"></a>Create a secret</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">CREATE SECRET [&lt;alias&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>CREATE SECRET</code> command to generate a secret for the current user and graph. It is optional to provide an alias for the secret.</p>
</div>
<div class="paragraph">
<p>Beginning with TigerGraph 3.1.4, the system will generate a random alias for the secret if the user does not provide an alias for that secret. Randomly generated aliases begin with <code>AUTO_GENERATED_ALIAS_</code> and include a random 7-character string.</p>
</div>
</div>
<div class="sect3">
<h4 id="_list_secrets"><a class="anchor" href="#_list_secrets"></a>List secrets</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">SHOW SECRET</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>SHOW SECRET</code> to list all secrets of the current user. The secrets will be masked and only the first and last three characters of the secrets will be shown. The alias of the secret and the graph that the secret is associated with will also be listed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">GSQL &gt; SHOW SECRET
    - Secret: s7s****3k5
      - Alias: HH
      - GraphName: Hogwarts
    - Secret: 75j****9i2
      - Alias: LL
      - GraphName: London</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drop_a_secret"><a class="anchor" href="#_drop_a_secret"></a>Drop a secret</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-coffeescript hljs" data-lang="coffeescript">DROP SECRET &lt;secret&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>DROP SECRET</code> command to drop a secret. Since a user can have multiple secrets, the secret to drop must be specified in the command.  You can specify a secret either by the secret string itself or by its alias.</p>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
