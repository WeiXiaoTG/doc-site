<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cycle Detection :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 3.0.0-alpha.8">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-data-science" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../intro/overview.html">TigerGraph Data Science Library</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../intro/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Centrality Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/betweenness-centrality.html">Betweenness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/closeness-centrality.html">Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/harmonic-centrality.html">Harmonic Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/pagerank.html">PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/personalized-pagerank.html">Personalized PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/weighted-pagerank.html">Weighted PageRank</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Classification Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/greedy-graph-coloring.html">Greedy Graph Coloring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors.html">k-Nearest Neighbors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-batch.html">k-Nearest Neighbors (Batch Version)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-cross-validation.html">k-Nearest Neighbors (Cross-Validation Version)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Community Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/connected-components.html">Weakly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/k-core-decomposition.html">K-Core Decomposition</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/label-propogation.html">Label Propogation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/local-clustering-coefficient.html">Local Clustering Coefficient</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/louvain-method-with-parallelism-and-refinement.html">Louvain Method with Parallelism and Refinement</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/README.html">Community Algorithms</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/strongly-connected-components.html">Strongly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/triangle-counting.html">Triangle Counting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Node Embeddings</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/fast-random-projection.html">Fast Random Projection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/node2vec.html">Node2Vec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Pathfinding Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="all-pairs-shortest-path.html">All-Pairs Shortest Path</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="cycle-detection.html">Cycle Detection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="estimated-diameter.html">Estimated Diameter</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="maximum-independent-set.html">Maximum Independent Set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="minimum-spanning-forest.html">Minimum Spanning Forest</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="minimum-spanning-tree.html">Minimum Spanning Tree</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="random-walk.html">Random Walk</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="single-pair-shortest-path.html">Single-Pair Shortest Path</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="single-source-shortest-path-unweighted.html">Single-source Shortest Path (Unweighted)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="single-source-shortest-path-weighted.html">Single-source Shortest Path (Weighted)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Similarity Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-all-pairs.html">Cosine Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-batch.html">Cosine Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-single-source.html">Cosine Similarity of Neighborhoods (Single-Source)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-all-pairs.html">Jaccard Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-batch.html">Jaccard Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-single-source.html">Jaccard Similarity of Neighborhoods (Single Source)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Data Science Library</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tigergraph-gui/3.2/graphstudio/overview.html">GraphStudio and Admin Portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../gsql-ref/3.2/intro/intro.html">GSQL Language Reference</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../gsql-ref/3.2/intro/intro.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-cloud/latest/start/README.html">TigerGraph Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-cloud/latest/start/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../intro/overview.html">TigerGraph Data Science Library</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../intro/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-server/3.2/intro/introduction.html">TigerGraph Server</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-server/3.2/intro/introduction.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../intro/overview.html">TigerGraph Data Science Library</a></li>
    <li>Pathfinding Algorithms</li>
    <li><a href="cycle-detection.html">Cycle Detection</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/graph-ml/edit/main/modules/pathfinding-algorithms/pages/cycle-detection.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Cycle Detection</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Cycle Detection problem seeks to find all the cycles (loops) in a graph. We apply the usual restriction that the cycles must be "simple cycles", that is, they are paths that start and end at the same vertex but otherwise never visit any vertex twice.</p>
</div>
<div class="paragraph">
<p>There are two versions of the task: for directed graphs and undirected graphs. The GSQL algorithm library currently supports only directed cycle detection. The <a href="https://en.wikipedia.org/wiki/Rocha%E2%80%93Thatte_cycle_detection_algorithm">Rocha&#8212;&#8203;Thatte algorithm</a> is an efficient distributed algorithm, which detects all the cycles in a directed graph. The algorithm will self-terminate, but it is also possible to stop at k iterations, which finds all the cycles having lengths up to k edges.</p>
</div>
<div class="paragraph">
<p>The basic idea of the algorithm is to (potentially) traverse every edge in parallel, again and again, forming all possible paths. At each step, if a path forms a cycle, it records it and stops extending it. More specifically:</p>
</div>
<div class="paragraph">
<p><strong>Initialization</strong><br>
For each vertex, record one path consisting of its own id. Mark the vertex as Active.</p>
</div>
<div class="paragraph">
<p><strong>Iteration steps:</strong><br>
For each Active vertex v:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Send its list of paths to each of its out-neighbors.</p>
</li>
<li>
<p>Inspect each path P in the list of the paths received:</p>
<div class="ulist">
<ul>
<li>
<p>If the first id in P is also id(v), a cycle has been found:</p>
<div class="ulist">
<ul>
<li>
<p>Remove P from its list.</p>
</li>
<li>
<p>If id(v) is the least id of any id in P, then add P to the Cycle List. (The purpose is to count each cycle only once.)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Else, if id(v) is somewhere else in the path, then remove P from the path list (because this cycle must have been counted already).</p>
</li>
<li>
<p>Else, append id(v) to the end of each of the remaining paths in its list.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifications"><a class="anchor" href="#_specifications"></a>Specifications</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-erlang hljs" data-lang="erlang">tg_cycle_detection (SET&lt;STRING&gt; v_type, SET&lt;STRING&gt; e_type, INT depth,
  BOOL print_accum = TRUE, STRING file_path = "")
----+++&lt;table&gt;++++++&lt;thead&gt;++++++&lt;tr&gt;++++++&lt;th style="text-align:left"&gt;++++++&lt;b&gt;+++Characteristic+++&lt;/b&gt;++++++&lt;/th&gt;+++
      +++&lt;th style="text-align:left"&gt;+++Value+++&lt;/th&gt;++++++&lt;/tr&gt;++++++&lt;/thead&gt;+++
  +++&lt;tbody&gt;++++++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;p&gt;+++Computes a list of vertex id lists, each of which is a cycle. The result
          is available in 2 forms:+++&lt;/p&gt;+++
        +++&lt;ul&gt;++++++&lt;li&gt;+++streamed out in JSON format+++&lt;/li&gt;+++
          +++&lt;li&gt;+++written to a file in tabular format+++&lt;/li&gt;++++++&lt;/ul&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Input Parameters+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;ul&gt;++++++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; v_type+++&lt;/code&gt;++++++&lt;/b&gt;+++: Names of vertex types to
            use+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; e_type+++&lt;/code&gt;++++++&lt;/b&gt;+++: Names of edge types to use+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++INT depth+++&lt;/code&gt;++++++&lt;/b&gt;+++: Maximum cycle length to search for = maximum
            number of iterations+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++BOOL print_accum+++&lt;/code&gt;++++++&lt;/b&gt;+++: If True, output JSON to standard
            output+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++STRING file_path+++&lt;/code&gt;+++:+++&lt;/b&gt;+++ If not empty, write output to this
            file.+++&lt;/li&gt;++++++&lt;/ul&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result Size+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;p&gt;+++Number of cycles * average cycle length+++&lt;/p&gt;+++
        +++&lt;p&gt;+++Both of these measures are not known in advance.+++&lt;/p&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Time Complexity+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;p&gt;+++O(E *k), E = number of edges.+++&lt;/p&gt;+++
        +++&lt;p&gt;+++k = min(max. cycle length, depth parameter)+++&lt;/p&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Graph Types+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;+++Directed+++&lt;/td&gt;++++++&lt;/tr&gt;++++++&lt;/tbody&gt;++++++&lt;/table&gt;+++

== *Example*

In the social10 graph, there are 5 cycles, all with the Fiona-George-Howard-Ivy cluster.

image::../../.gitbook/assets/screen-shot-2019-04-09-at-10.33.42-am.png[Visualized results of cycle_detection(&amp;quot;Person&amp;quot;, &amp;quot;Friend&amp;quot;, 10) on social10 graph]

[source,text]</code></pre>
</div>
</div>
<div class="paragraph">
<p>[
  {
    "@@cycles": [
      [
        "Fiona",
        "Ivy"
      ],
      [
        "George",
        "Ivy"
      ],
      [
        "Fiona",
        "George",
        "Ivy"
      ],
      [
        "George",
        "Howard",
        "Ivy"
      ],
      [
        "Fiona",
        "George",
        "Howard",
        "Ivy"
      ]
    ]
  }
]</p>
</div>
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
