<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Closeness Centrality :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 3.0.0-alpha.8">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-data-science" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../intro/overview.html">TigerGraph Data Science Library</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../intro/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Centrality Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="betweenness-centrality.html">Betweenness Centrality</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="closeness-centrality.html">Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="harmonic-centrality.html">Harmonic Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pagerank.html">PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="personalized-pagerank.html">Personalized PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="weighted-pagerank.html">Weighted PageRank</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Classification Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/greedy-graph-coloring.html">Greedy Graph Coloring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors.html">k-Nearest Neighbors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-batch.html">k-Nearest Neighbors (Batch Version)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-cross-validation.html">k-Nearest Neighbors (Cross-Validation Version)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Community Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/connected-components.html">Weakly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/k-core-decomposition.html">K-Core Decomposition</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/label-propogation.html">Label Propogation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/local-clustering-coefficient.html">Local Clustering Coefficient</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/louvain-method-with-parallelism-and-refinement.html">Louvain Method with Parallelism and Refinement</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/README.html">Community Algorithms</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/strongly-connected-components.html">Strongly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../community-algorithms/triangle-counting.html">Triangle Counting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Node Embeddings</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/fast-random-projection.html">Fast Random Projection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/node2vec.html">Node2Vec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Pathfinding Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/all-pairs-shortest-path.html">All-Pairs Shortest Path</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/cycle-detection.html">Cycle Detection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/estimated-diameter.html">Estimated Diameter</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/maximum-independent-set.html">Maximum Independent Set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/minimum-spanning-forest.html">Minimum Spanning Forest</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/minimum-spanning-tree.html">Minimum Spanning Tree</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/random-walk.html">Random Walk</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-pair-shortest-path.html">Single-Pair Shortest Path</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-source-shortest-path-unweighted.html">Single-source Shortest Path (Unweighted)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-source-shortest-path-weighted.html">Single-source Shortest Path (Weighted)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Similarity Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-all-pairs.html">Cosine Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-batch.html">Cosine Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-single-source.html">Cosine Similarity of Neighborhoods (Single-Source)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-all-pairs.html">Jaccard Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-batch.html">Jaccard Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-single-source.html">Jaccard Similarity of Neighborhoods (Single Source)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Data Science Library</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tigergraph-gui/3.2/graphstudio/overview.html">GraphStudio and Admin Portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../gsql-ref/3.2/intro/intro.html">GSQL Language Reference</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../gsql-ref/3.2/intro/intro.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-cloud/latest/start/README.html">TigerGraph Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-cloud/latest/start/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../intro/overview.html">TigerGraph Data Science Library</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../intro/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-server/3.2/intro/introduction.html">TigerGraph Server</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-server/3.2/intro/introduction.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../intro/overview.html">TigerGraph Data Science Library</a></li>
    <li>Centrality Algorithms</li>
    <li><a href="closeness-centrality.html">Closeness Centrality</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/graph-ml/edit/main/modules/centrality-algorithms/pages/closeness-centrality.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Closeness Centrality</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We all have an intuitive understanding when we say a home, an office, or a store is "centrally located." Closeness Centrality provides a precise measure of how "centrally located" a vertex is. The steps below show the steps for one vertex <code>v</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Step</th>
<th class="tableblock halign-left valign-top">Mathematical Formula</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. Compute the average distance from vertex v to every other vertex:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(d_{avg}(v) = \sum_{u \ne v} dist(v,u)/(n-1)\)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2. Invert the average distance, so we have average closeness of v:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(CC(v) = 1/d_{avg}(v)\)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>TigerGraph&#8217;s closeness centrality algorithm uses multi-source breadth-first search (MS-BFS) to traverse the graph and calculate the sum of a vertex&#8217;s distance to every other vertex in the graph, which vastly improves the performance of the algorithm. The algorithm&#8217;s implementation of MS-BFS is based on the paper <a href="https://db.in.tum.de/~kaufmann/papers/msbfs.pdf">The More the Merrier: Efficient Multi-source Graph Traversal by Then et al</a>.</p>
</div>
<div class="paragraph">
<p>{% hint style="warning" %}
This algorithm query employs a subquery called <code>cc_subquery</code>. Both queries are needed to run the algorithm.
{% endhint %}</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifications"><a class="anchor" href="#_specifications"></a>Specifications</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-erlang hljs" data-lang="erlang">tg_closeness_cent (SET&lt;STRING&gt; v_type, SET&lt;STRING&gt; e_type, INT max_hops=10,
  INT top_k=100, BOOL wf = TRUE, BOOL print_accum = True, STRING result_attr = "",
  STRING file_path = "", BOOL display_edges = FALSE)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parameterscharacteristic"><a class="anchor" href="#_parameterscharacteristic"></a><strong>Parameters</strong><table><thead><tr><th style="text-align:left"><b>Characteristic</b></th></h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>    +++&lt;th style="text-align:left"&gt;+++Value+++&lt;/th&gt;++++++&lt;/tr&gt;++++++&lt;/thead&gt;+++
+++&lt;tbody&gt;++++++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result+++&lt;/td&gt;+++
    +++&lt;td style="text-align:left"&gt;+++Computes a Closeness Centrality value (FLOAT type) for each vertex.+++&lt;/td&gt;++++++&lt;/tr&gt;+++
  +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Required Input Parameters+++&lt;/td&gt;+++
    +++&lt;td style="text-align:left"&gt;++++++&lt;ul&gt;++++++&lt;li&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; v_type+++&lt;/code&gt;+++: Names of vertex types to use+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; e_type+++&lt;/code&gt;+++: Names of edge types to use+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt;+++&lt;/code&gt;+++  +++&lt;code&gt;+++re_type+++&lt;/code&gt;+++: Names of reverse edge
          types to use+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++INT max_hops+++&lt;/code&gt;+++: If &gt;=0, look only this far from each vertex+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++INT top_k+++&lt;/code&gt;++++++&lt;b&gt;+++:+++&lt;/b&gt;+++ Sort the scores highest first and output
          only this many scores+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++BOOL wf+++&lt;/code&gt;+++: If True, use Wasserman-Faust normalization for multi-component
          graphs+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++BOOL print_accum+++&lt;/code&gt;+++: If true, output JSON to standard output+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++STRING result_attr+++&lt;/code&gt;+++: If not empty, store centrality values
          (FLOAT) to this attribute+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++STRING file_path+++&lt;/code&gt;++++++&lt;b&gt;+++:+++&lt;/b&gt;+++ If not empty, write output to this
          file in CSV.+++&lt;/li&gt;+++
        +++&lt;li&gt;++++++&lt;code&gt;+++BOOL display_edges+++&lt;/code&gt;+++: If true, include the graph&amp;apos;s edges
          in the JSON output, so that the full graph can be displayed.+++&lt;/li&gt;++++++&lt;/ul&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
  +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result Size+++&lt;/td&gt;+++
    +++&lt;td style="text-align:left"&gt;+++V = number of vertices+++&lt;/td&gt;++++++&lt;/tr&gt;+++
  +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Time Complexity+++&lt;/td&gt;+++
    +++&lt;td style="text-align:left"&gt;++++++&lt;p&gt;+++O(E), E = number of edges.+++&lt;/p&gt;+++
      +++&lt;p&gt;+++Parallel processing reduces the time needed for computation.+++&lt;/p&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
  +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Graph Types+++&lt;/td&gt;+++
    +++&lt;td style="text-align:left"&gt;+++Directed or Undirected edges, Unweighted edges+++&lt;/td&gt;++++++&lt;/tr&gt;++++++&lt;/tbody&gt;++++++&lt;/table&gt;+++</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example"><a class="anchor" href="#_example"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Closeness centrality can be measured for either directed edges (from <code>v</code> to others) or for undirected edges. Directed graphs may seem less intuitive, however, because if the distance from Alex to Bob is 1, it does not mean the distance from Bob to Alex is also 1.</p>
</div>
<div class="paragraph">
<p>For our example, we wanted to use the topology of the Likes graph, but to have undirected edges. We emulated an undirected graph by using both <code>Friend</code> and <code>Also_Friend</code> (reverse-direction) edges.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql"># Use _ for default values
RUN QUERY tg_closeness_cent(["Person"], ["Friend", "Also_Friend"], _, _,
_, _, _, _, _)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../../.gitbook/assets/closeness_result.png" alt="Visualized results of example query on social10 graph" width="with Friend and Also_Friend edges">
</div>
</div>
<div class="paragraph">
<p><mark>#</mark></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
