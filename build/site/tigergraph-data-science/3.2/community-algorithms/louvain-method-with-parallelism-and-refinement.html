<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Louvain Method with Parallelism and Refinement :: TigerGraph Documentation</title>
    <meta name="generator" content="Antora 3.0.0-alpha.8">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">TigerGraph Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="tigergraph-data-science" data-version="3.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../intro/overview.html">TigerGraph Data Science Library</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../intro/overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Centrality Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/approximate-closeness-centrality.html">Approximate Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/betweenness-centrality.html">Betweenness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/closeness-centrality.html">Closeness Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/harmonic-centrality.html">Harmonic Centrality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/pagerank.html">PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/personalized-pagerank.html">Personalized PageRank</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../centrality-algorithms/weighted-pagerank.html">Weighted PageRank</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Classification Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/greedy-graph-coloring.html">Greedy Graph Coloring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors.html">k-Nearest Neighbors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-batch.html">k-Nearest Neighbors (Batch Version)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classification-algorithms/k-nearest-neighbors-cross-validation.html">k-Nearest Neighbors (Cross-Validation Version)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Community Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="connected-components.html">Weakly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="k-core-decomposition.html">K-Core Decomposition</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="label-propogation.html">Label Propogation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="local-clustering-coefficient.html">Local Clustering Coefficient</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="louvain-method-with-parallelism-and-refinement.html">Louvain Method with Parallelism and Refinement</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="README.html">Community Algorithms</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="strongly-connected-components.html">Strongly Connected Components</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="triangle-counting.html">Triangle Counting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Node Embeddings</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/fast-random-projection.html">Fast Random Projection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../node-embeddings/node2vec.html">Node2Vec</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Pathfinding Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/all-pairs-shortest-path.html">All-Pairs Shortest Path</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/cycle-detection.html">Cycle Detection</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/estimated-diameter.html">Estimated Diameter</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/maximum-independent-set.html">Maximum Independent Set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/minimum-spanning-forest.html">Minimum Spanning Forest</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/minimum-spanning-tree.html">Minimum Spanning Tree</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/random-walk.html">Random Walk</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-pair-shortest-path.html">Single-Pair Shortest Path</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-source-shortest-path-unweighted.html">Single-source Shortest Path (Unweighted)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pathfinding-algorithms/single-source-shortest-path-weighted.html">Single-source Shortest Path (Weighted)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Similarity Algorithms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-all-pairs.html">Cosine Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-batch.html">Cosine Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/cosine-similarity-of-neighborhoods-single-source.html">Cosine Similarity of Neighborhoods (Single-Source)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-all-pairs.html">Jaccard Similarity of Neighborhoods (All Pairs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-batch.html">Jaccard Similarity of Neighborhoods (Batch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../similarity-algorithms/jaccard-similarity-of-neighborhoods-single-source.html">Jaccard Similarity of Neighborhoods (Single Source)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">TigerGraph Data Science Library</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../tigergraph-gui/3.2/graphstudio/overview.html">GraphStudio and Admin Portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-gui/3.2/graphstudio/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../gsql-ref/3.2/intro/intro.html">GSQL Language Reference</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../gsql-ref/3.2/intro/intro.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-cloud/latest/start/README.html">TigerGraph Cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-cloud/latest/start/README.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../intro/overview.html">TigerGraph Data Science Library</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../intro/overview.html">3.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../tigergraph-server/3.2/intro/introduction.html">TigerGraph Server</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tigergraph-server/3.2/intro/introduction.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../intro/overview.html">TigerGraph Data Science Library</a></li>
    <li>Community Algorithms</li>
    <li><a href="louvain-method-with-parallelism-and-refinement.html">Louvain Method with Parallelism and Refinement</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/lennessyy/graph-ml/edit/main/modules/community-algorithms/pages/louvain-method-with-parallelism-and-refinement.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Louvain Method with Parallelism and Refinement</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Louvain Method for community detection [1] partitions the vertices in a graph by approximately maximizing the graph&#8217;s modularity score. The modularity score for a partitioned graph assesses the difference in density of links within a partition vs. the density of links crossing from one partition to another. The assumption is that if a partitioning is good (that is, dividing up the graph into communities or clusters), then the within-density should be high and the inter-density should be low.</p>
</div>
<div class="paragraph">
<p>The most efficient and empirically effective method for calculating modularity was published by a team of researchers at the University of Louvain. The Louvain method uses agglomeration and hierarchical optimization:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Optimize modularity for small local communities.</p>
</li>
<li>
<p>Treat each optimized local group as one unit, and repeat the modularity operation for groups of these condensed units.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The original Louvain Method contains two phases. The first phase incrementally calculates the modularity change of moving a vertex into every other community and moves the vertex to the community with the highest modularity change. The second phase coarsens the graph by aggregating the vertices which are assigned in the same community into one vertex. The first phase and second phase make up a pass. The Louvain Method performs the passes iteratively. In other words, the algorithm assigns an initial community label to every vertex, then performs the first phase, during which the community labels are changed until there is no modularity gain. Then it aggregates the vertices with the same labels into one vertex and calculates the aggregated edge weights between new vertices. For the coarsened graph, the algorithm conducts the first phase again to move the vertices into new communities. The algorithm continues until the modularity is not increasing, or runs to the preset iteration limits.</p>
</div>
<div class="paragraph">
<p>However, phase one is sequential, and thus slow for large graphs. An improved Parallel Louvain Method Louvain Method (PLM) calculates the best community to move to for each vertex in parallel [2]. In Parallel Louvain Method(PLM), the positive modularity gain is not guaranteed, and it may also swap two vertices to each other&#8217;s community. After finishing the passes, there is an additional refinement phase, which is running the first phase again on each vertex to do some small adjustments for the resulting communities. [3].</p>
</div>
<div class="paragraph">
<p>[1] Blondel, Vincent D., et al. "Fast unfolding of communities in large networks." Journal of statistical mechanics: theory and experiment 2008.10 (2008): P10008.</p>
</div>
<div class="paragraph">
<p>[2] Staudt, Christian L., and Henning Meyerhenke. "Engineering parallel algorithms for community detection in massive networks." IEEE Transactions on Parallel and Distributed Systems 27.1 (2016): 171-184.</p>
</div>
<div class="paragraph">
<p>[3] Lu, Hao, Mahantesh Halappanavar, and Ananth Kalyanaraman. "Parallel heuristics for scalable community detection." Parallel Computing 47 (2015): 19-37.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_specifications"><a class="anchor" href="#_specifications"></a>Specifications</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-erlang hljs" data-lang="erlang">tg_louvain_parallel (SET&lt;STRING&gt; v_type, SET&lt;STRING&gt; e_type, STRING wt_attr,
  INT iter1=10, INT iter2=10, INT iter3=10, INT split=10, BOOL print_accum = TRUE,
  STRING result_attr = "", STRING file_path = "", BOOL comm_by_size = TRUE)
----+++&lt;table&gt;++++++&lt;thead&gt;++++++&lt;tr&gt;++++++&lt;th style="text-align:left"&gt;++++++&lt;b&gt;+++Characteristic+++&lt;/b&gt;++++++&lt;/th&gt;+++
      +++&lt;th style="text-align:left"&gt;+++Value+++&lt;/th&gt;++++++&lt;/tr&gt;++++++&lt;/thead&gt;+++
  +++&lt;tbody&gt;++++++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;+++Assigns a component id (INT) to each vertex, such that members of the
        same component have the same id value. The JSON output lists every vertex
        with its community ID value. It also lists community id values, sorted
        by community size.+++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Input Parameters+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;ul&gt;++++++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; v_type+++&lt;/code&gt;++++++&lt;/b&gt;+++: Names of vertex types to
            use+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++SET&lt;STRING&gt; e_type+++&lt;/code&gt;++++++&lt;/b&gt;+++: Names of edge types to use+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++STRING wt_attr+++&lt;/code&gt;++++++&lt;/b&gt;+++: Name of edge weight attribute (must
            be FLOAT)+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++INT iter1+++&lt;/code&gt;++++++&lt;/b&gt;+++: Max number of iterations for the first
            phase. Default value is 10+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++INT iter2+++&lt;/code&gt;++++++&lt;/b&gt;+++: Max number of iterations for the second
            phase. Default value is 10+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++INT iter3+++&lt;/code&gt;++++++&lt;/b&gt;+++: Max number of iterations for the refinement
            phase. Default value is 10+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++INT split+++&lt;/code&gt;++++++&lt;/b&gt;+++: Number of splits in phase 1. Increase the
            number to save memory, at the expense of having a longer running time.
            Default value is 10.+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++BOOL print_accum+++&lt;/code&gt;++++++&lt;/b&gt;+++: If True, output JSON to standard
            output+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++STRING result_attr+++&lt;/code&gt;++++++&lt;/b&gt;+++: If not empty, store community
            id values (INT) to this attribute+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++STRING file_path+++&lt;/code&gt;+++:+++&lt;/b&gt;+++ If not empty, write output to this
            file.+++&lt;/li&gt;+++
          +++&lt;li&gt;++++++&lt;b&gt;++++++&lt;code&gt;+++BOOL comm_by_size+++&lt;/code&gt;++++++&lt;/b&gt;+++: If True, and if +++&lt;code&gt;+++print_accum+++&lt;/code&gt;+++ is
            True, output the membership of each community, with communities arranged
            by size.+++&lt;/li&gt;++++++&lt;/ul&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Result Size+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;+++V = number of vertices+++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Time Complexity+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;+++O(V{caret}2*L), V = number of vertices, L = (iter1 * iter2 + iter3) = total
        number of iterations+++&lt;/td&gt;++++++&lt;/tr&gt;+++
    +++&lt;tr&gt;++++++&lt;td style="text-align:left"&gt;+++Graph Types+++&lt;/td&gt;+++
      +++&lt;td style="text-align:left"&gt;++++++&lt;p&gt;+++Undirected, weighted edges+++&lt;/p&gt;+++
        +++&lt;p&gt;+++An edge weight attribute is required.+++&lt;/p&gt;++++++&lt;/td&gt;++++++&lt;/tr&gt;++++++&lt;/tbody&gt;++++++&lt;/table&gt;+++

== Example

If we use `louvain_parallel` for social10 graph, it will give the same result as the connected components algorithm. The social26 graph is a densely connected graph. The connected components algorithm groups all the vertices into the same community and label propagation does not consider the edge weight. On the contrary, `louvain_parallel` detects 7 communities in total, and the cluster distribution is shown below (`csize` is cluster size):

[source,text]</code></pre>
</div>
</div>
<div class="paragraph">
<p>{
    "@@clusterDist": [
      {
        "csize": 2,
        "number": 1
      },
      {
        "csize": 3,
        "number": 2
      },
      {
        "csize": 4,
        "number": 2
      },
      {
        "csize": 5,
        "number": 2
      }
    ]</p>
</div>
<div class="listingblock">
<div class="content">
<pre>###</pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
